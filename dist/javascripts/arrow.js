define(["exports"],function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){switch(t){case 38:return(!e||1!==e)&&"t";case 40:return(!e||1!==e)&&"b";case 37:return(!e||1!==e)&&"l";case 39:return(!e||1!==e)&&"r";case 87:return(!e||2!==e)&&"t";case 83:return(!e||2!==e)&&"b";case 65:return(!e||2!==e)&&"l";case 68:return(!e||2!==e)&&"r";default:return!1}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=document.body.clientWidth,n=document.body.clientHeight,a=function(){function t(){var i=arguments.length<=0||void 0===arguments[0]?0:arguments[0];e(this,t),this.deg=0,this.player=i,this.moveList={t:0,b:0,l:0,r:0,count:0},this.speed=3,this.elem=this.initElem(),this.width=12,this.height=24,this.missCtrl=!1,this.ctrlDeg=1260,this.sign=!1,this.backDirection="b",this.start=this.start.bind(this),this.stop=this.stop.bind(this),this.initPlayer(),this.bindEvent(),this.move()}return s(t,[{key:"initPlayer",value:function(){window.getComputedStyle(this.elem);switch(this.player){case 0:this.x=r/2,this.y=n/2;break;case 1:this.x=r/2-200,this.y=n/2;break;case 2:this.x=r/2+200,this.y=n/2}this.elem.style.transform="translate3D("+this.x+"px,"+this.y+"px, 0px) rotate("+this.deg+"deg)"}},{key:"over",value:function(){var t=this;Array.from(["l","r","t","b","count"],function(e){return t.moveList[e]=0}),this.removeEvent()}},{key:"initElem",value:function(t){var e=document.createElement("div");return e.className="arrow arrow"+this.player,document.getElementById("game").appendChild(e),e}},{key:"bindEvent",value:function(){document.addEventListener("keydown",this.start,!1),document.addEventListener("keyup",this.stop,!1)}},{key:"removeEvent",value:function(){document.removeEventListener("keydown",this.start,!1),document.removeEventListener("keyup",this.stop,!1)}},{key:"start",value:function(t){if(this.missCtrl)return!1;var e=t.keyCode,s=i(e,this.player);return s!==!1&&!this.moveList[s]&&2!==this.moveList.count&&(this.moveList[s]=this.speed,this.moveList.count++,void this.setArrowDir())}},{key:"stop",value:function(t){if(this.missCtrl)return!1;var e=t.keyCode,s=i(e,this.player);return!(s===!1||!this.moveList[s])&&(this.moveList[s]=0,this.moveList.count--,void this.setArrowDir())}},{key:"move",value:function(){var t=this,e=r-this.height/2,i=n-this.height/2,s=this.height/2,a=this.height/2,o=function c(r){t.x+=t.moveList.r-t.moveList.l,t.y+=t.moveList.b-t.moveList.t,t.x>=e&&(t.x=e),t.y>=i&&(t.y=i),t.x<=s&&(t.x=s),t.y<=a&&(t.y=a),t.missCtrl&&(t.deg+=45,t.ctrlDeg-=45,t.ctrlDeg<=0&&(t.missCtrl=!1,Array.from(["l","r","t","b","count"],function(e){return t.moveList[e]=0}),t.ctrlDeg=1260,t.backDirection=t.getBackDir(t.deg))),t.elem.style.transform="translate3D("+t.x+"px,"+t.y+"px, 0px) rotate("+t.deg+"deg)",requestAnimationFrame(c)};requestAnimationFrame(o)}},{key:"setArrowDir",value:function(){var t=this;if(1===this.moveList.count)this.deg=this.moveList.l?-90:this.moveList.r?90:this.moveList.b?180:0,this.backDirection=this.moveList.l?"r":this.moveList.r?"l":this.moveList.b?"t":"b";else if(2===this.moveList.count){var e=["l","r","t","b"],i=e.filter(function(e){return t.moveList[e]>0}).join("");switch(i){case"lt":this.backDirection="rb",this.deg=-45;break;case"lb":this.backDirection="rt",this.deg=-135;break;case"rt":this.backDirection="lb",this.deg=45;break;case"rb":this.backDirection="lt",this.deg=135}}}},{key:"getBackDir",value:function(t){var e=t%360;switch(e){case 0:e="b";break;case 45:case-315:e="lb";break;case 90:case-270:e="l";break;case 135:case-225:e="lt";break;case 180:case-180:e="t";break;case-45:case 315:e="rb";break;case-90:case 270:e="r";break;case-135:case 225:e="rt"}return e}},{key:"collision",value:function(){var t=this;if(this.missCtrl)return!1;this.missCtrl=!0;var e=this.backDirection.split("");Array.from(["l","r","t","b"],function(i){t.moveList[i]=e.includes(i)?1:0})}}]),t}();t["default"]=a});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFycm93LmpzIl0sIm5hbWVzIjpbImRlZmluZSIsImV4cG9ydHMiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiZ2V0RGlyZWN0aW9uIiwiY29kZSIsInBsYXllciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJpIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsImR3IiwiZG9jdW1lbnQiLCJib2R5IiwiY2xpZW50V2lkdGgiLCJkaCIsImNsaWVudEhlaWdodCIsIkFycm93IiwiYXJndW1lbnRzIiwidW5kZWZpbmVkIiwidGhpcyIsImRlZyIsIm1vdmVMaXN0IiwidCIsImIiLCJsIiwiciIsImNvdW50Iiwic3BlZWQiLCJlbGVtIiwiaW5pdEVsZW0iLCJ3aWR0aCIsImhlaWdodCIsIm1pc3NDdHJsIiwiY3RybERlZyIsInNpZ24iLCJiYWNrRGlyZWN0aW9uIiwic3RhcnQiLCJiaW5kIiwic3RvcCIsImluaXRQbGF5ZXIiLCJiaW5kRXZlbnQiLCJtb3ZlIiwid2luZG93IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsIngiLCJ5Iiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJfdGhpcyIsIkFycmF5IiwiZnJvbSIsImRpciIsInJlbW92ZUV2ZW50IiwibnVtIiwiZGl2IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImdldEVsZW1lbnRCeUlkIiwiYXBwZW5kQ2hpbGQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImUiLCJrZXlDb2RlIiwic2V0QXJyb3dEaXIiLCJfdGhpczIiLCJydyIsInJoIiwibHciLCJsaCIsInN0ZXAiLCJ0aW1lc3RhbXAiLCJnZXRCYWNrRGlyIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiX3RoaXMzIiwiZGlyQXJyIiwiZCIsImZpbHRlciIsImpvaW4iLCJfdGhpczQiLCJhcnIiLCJzcGxpdCIsImluY2x1ZGVzIl0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBUSxXQUFZLFNBQVVDLEdBQzdCLFlBTUEsU0FBU0MsR0FBZ0JDLEVBQVVDLEdBQ2xDLEtBQU1ELFlBQW9CQyxJQUN6QixLQUFNLElBQUlDLFdBQVUscUNBMk12QixRQUFTQyxHQUFhQyxFQUFNQyxHQUMzQixPQUFRRCxHQUNQLElBQUssSUFFSCxRQUFJQyxHQUFxQixJQUFYQSxJQUNQLEdBR1QsS0FBSyxJQUVILFFBQUlBLEdBQXFCLElBQVhBLElBQ1AsR0FHVCxLQUFLLElBRUgsUUFBSUEsR0FBcUIsSUFBWEEsSUFDUCxHQUdULEtBQUssSUFFSCxRQUFJQSxHQUFxQixJQUFYQSxJQUNQLEdBR1QsS0FBSyxJQUVILFFBQUlBLEdBQXFCLElBQVhBLElBQ1AsR0FHVCxLQUFLLElBRUgsUUFBSUEsR0FBcUIsSUFBWEEsSUFDUCxHQUdULEtBQUssSUFFSCxRQUFJQSxHQUFxQixJQUFYQSxJQUNQLEdBR1QsS0FBSyxJQUVILFFBQUlBLEdBQXFCLElBQVhBLElBQ1AsR0FHVCxTQUVFLE9BQU8sR0FyUVZDLE9BQU9DLGVBQWVULEVBQVMsY0FDOUJVLE9BQU8sR0FTUixJQUFJQyxHQUFlLFdBQ2xCLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUNqQyxJQUFLLEdBQUlDLEdBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUN0QyxHQUFJRSxHQUFhSCxFQUFNQyxFQUN2QkUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUNqREQsRUFBV0UsY0FBZSxFQUN0QixTQUFXRixLQUFZQSxFQUFXRyxVQUFXLEdBQ2pEWixPQUFPQyxlQUFlSSxFQUFRSSxFQUFXSSxJQUFLSixJQUloRCxNQUFPLFVBQVVkLEVBQWFtQixFQUFZQyxHQUd6QyxNQUZJRCxJQUFZVixFQUFp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QUVIQSxFQUFJLEdBQ0osTUFFRixVQUNBLElBQUssS0FFSEEsRUFBSSxLQUlQLE1BQU9BLE1BcUVOckUsSUFBSyxZQUNMWCxNQUFPLFdBcEVHLEdBQUFtRixHQUFBM0QsSUFDWCxJQUFJQSxLQUFLYSxTQUFVLE9BQU8sQ0FDMUJiLE1BQUthLFVBQVcsQ0FDaEIsSUFBSStDLEdBQU01RCxLQUFLZ0IsY0FBYzZDLE1BQU0sR0FDbkMvQixPQUFNQyxNQUFNLElBQUssSUFBSyxJQUFLLEtBQU0sU0FBQ0MsR0FDakMyQixFQUFLekQsU0FBUzhCLEdBQU80QixFQUFJRSxTQUFTOUIsR0FBTyxFQUFJLFFBMkV2Q25DLElBR1IvQixHQUFBQSxXQXZSb0IrQiIsImZpbGUiOiJhcnJvdy5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCBkdyA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg7XHJcbmxldCBkaCA9IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXJyb3cge1xyXG5cdGNvbnN0cnVjdG9yKHBsYXllciA9IDApIHtcclxuXHRcdHRoaXMuZGVnID0gMDtcclxuXHRcdHRoaXMucGxheWVyID0gcGxheWVyO1xyXG5cdFx0dGhpcy5tb3ZlTGlzdCA9IHtcclxuXHRcdFx0dDogMCxcclxuXHRcdFx0YjogMCxcclxuXHRcdFx0bDogMCxcclxuXHRcdFx0cjogMCxcclxuXHRcdFx0Y291bnQ6IDAsXHJcblx0XHR9O1xyXG5cdFx0dGhpcy5zcGVlZCA9IDM7XHJcblx0XHR0aGlzLmVsZW0gPSB0aGlzLmluaXRFbGVtKCk7XHJcblx0XHR0aGlzLndpZHRoID0gMTI7XHJcblx0XHR0aGlzLmhlaWdodCA9IDI0O1xyXG5cdFx0dGhpcy5taXNzQ3RybCA9IGZhbHNlO1xyXG5cdFx0dGhpcy5jdHJsRGVnID0gMTI2MDtcclxuXHRcdHRoaXMuc2lnbiA9IGZhbHNlO1xyXG5cdFx0dGhpcy5iYWNrRGlyZWN0aW9uID0gJ2InO1xyXG5cdFx0dGhpcy5zdGFydCA9IHRoaXMuc3RhcnQuYmluZCh0aGlzKTtcclxuXHRcdHRoaXMuc3RvcCA9IHRoaXMuc3RvcC5iaW5kKHRoaXMpO1xyXG5cdFx0dGhpcy5pbml0UGxheWVyKCk7XHJcblx0XHR0aGlzLmJpbmRFdmVudCgpO1xyXG5cdFx0dGhpcy5tb3ZlKCk7XHJcblx0fVxyXG5cdGluaXRQbGF5ZXIoKSB7XHJcblx0XHRsZXQgc3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5lbGVtKTtcclxuXHRcdHN3aXRjaCAodGhpcy5wbGF5ZXIpIHtcclxuXHRcdFx0Y2FzZSAwOlxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHRoaXMueCA9IGR3IC8gMjtcclxuXHRcdFx0XHRcdHRoaXMueSA9IGRoIC8gMjtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0Y2FzZSAxOlxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHRoaXMueCA9IGR3IC8gMiAtIDIwMDtcclxuXHRcdFx0XHRcdHRoaXMueSA9IGRoIC8gMjtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0Y2FzZSAyOlxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHRoaXMueCA9IGR3IC8gMiArIDIwMDtcclxuXHRcdFx0XHRcdHRoaXMueSA9IGRoIC8gMjtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHRoaXMuZWxlbS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlM0QoJyArICh0aGlzLngpICsgJ3B4LCcgKyB0aGlzLnkgKyAncHgsIDBweCkgcm90YXRlKCcgKyB0aGlzLmRlZyArICdkZWcpJztcclxuXHR9XHJcblx0b3ZlcigpIHtcclxuXHRcdEFycmF5LmZyb20oWydsJywgJ3InLCAndCcsICdiJywgJ2NvdW50J10sIChkaXIpID0+IHRoaXMubW92ZUxpc3RbZGlyXSA9IDApO1xyXG5cdFx0dGhpcy5yZW1vdmVFdmVudCgpO1xyXG5cdH1cclxuXHRpbml0RWxlbShudW0pIHtcclxuXHRcdGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdGRpdi5jbGFzc05hbWUgPSAnYXJyb3cgYXJyb3cnICsgdGhpcy5wbGF5ZXI7XHJcblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZScpLmFwcGVuZENoaWxkKGRpdik7XHJcblx0XHRyZXR1cm4gZGl2O1xyXG5cdH1cclxuXHRiaW5kRXZlbnQoKSB7XHJcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5zdGFydCwgZmFsc2UpO1xyXG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLnN0b3AsIGZhbHNlKTtcclxuXHR9XHJcblx0cmVtb3ZlRXZlbnQoKSB7XHJcblx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5zdGFydCwgZmFsc2UpO1xyXG5cdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLnN0b3AsIGZhbHNlKTtcclxuXHR9XHJcblx0c3RhcnQoZSkge1xyXG5cdFx0aWYgKHRoaXMubWlzc0N0cmwpIHJldHVybiBmYWxzZTtcclxuXHRcdGxldCBrZXkgPSBlLmtleUNvZGU7XHJcblx0XHRjb25zdCBkaXIgPSBnZXREaXJlY3Rpb24oa2V5LCB0aGlzLnBsYXllcik7XHJcblx0XHRpZiAoZGlyID09PSBmYWxzZSB8fCB0aGlzLm1vdmVMaXN0W2Rpcl0gfHwgdGhpcy5tb3ZlTGlzdFsnY291bnQnXSA9PT0gMikgcmV0dXJuIGZhbHNlO1xyXG5cdFx0dGhpcy5tb3ZlTGlzdFtkaXJdID0gdGhpcy5zcGVlZDtcclxuXHRcdHRoaXMubW92ZUxpc3RbJ2NvdW50J10rKztcclxuXHRcdHRoaXMuc2V0QXJyb3dEaXIoKTtcclxuXHR9XHJcblx0c3RvcChlKSB7XHJcblx0XHRpZiAodGhpcy5taXNzQ3RybCkgcmV0dXJuIGZhbHNlO1xyXG5cdFx0bGV0IGtleSA9IGUua2V5Q29kZTtcclxuXHRcdGNvbnN0IGRpciA9IGdldERpcmVjdGlvbihrZXksIHRoaXMucGxheWVyKTtcclxuXHRcdGlmIChkaXIgPT09IGZhbHNlIHx8ICF0aGlzLm1vdmVMaXN0W2Rpcl0pIHJldHVybiBmYWxzZTtcclxuXHRcdHRoaXMubW92ZUxpc3RbZGlyXSA9IDA7XHJcblx0XHR0aGlzLm1vdmVMaXN0Wydjb3VudCddLS07XHJcblx0XHR0aGlzLnNldEFycm93RGlyKCk7XHJcblx0fVxyXG5cdG1vdmUoKSB7XHJcblx0XHRsZXQgcncgPSAoKGR3KSAtICh0aGlzLmhlaWdodCAvIDIpKTtcclxuXHRcdGxldCByaCA9ICgoZGgpIC0gKHRoaXMuaGVpZ2h0IC8gMikpO1xyXG5cdFx0bGV0IGx3ID0gKHRoaXMuaGVpZ2h0IC8gMik7XHJcblx0XHRsZXQgbGggPSAodGhpcy5oZWlnaHQgLyAyKTtcclxuXHJcblx0XHRjb25zdCBzdGVwID0gKHRpbWVzdGFtcCkgPT4ge1xyXG5cdFx0XHR0aGlzLnggKz0gdGhpcy5tb3ZlTGlzdFsnciddIC0gdGhpcy5tb3ZlTGlzdFsnbCddO1xyXG5cdFx0XHR0aGlzLnkgKz0gdGhpcy5tb3ZlTGlzdFsnYiddIC0gdGhpcy5tb3ZlTGlzdFsndCddO1xyXG5cdFx0XHRpZiAodGhpcy54ID49IHJ3KSB0aGlzLnggPSBydztcclxuXHRcdFx0aWYgKHRoaXMueSA+PSByaCkgdGhpcy55ID0gcmg7XHJcblx0XHRcdGlmICh0aGlzLnggPD0gbHcpIHRoaXMueCA9IGx3O1xyXG5cdFx0XHRpZiAodGhpcy55IDw9IGxoKSB0aGlzLnkgPSBsaDtcclxuXHRcdFx0aWYgKHRoaXMubWlzc0N0cmwpIHtcclxuXHRcdFx0XHR0aGlzLmRlZyArPSA0NTtcclxuXHRcdFx0XHR0aGlzLmN0cmxEZWcgLT0gNDU7XHJcblxyXG5cdFx0XHRcdGlmICh0aGlzLmN0cmxEZWcgPD0gMCkge1xyXG5cdFx0XHRcdFx0dGhpcy5taXNzQ3RybCA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0QXJyYXkuZnJvbShbJ2wnLCAncicsICd0JywgJ2InLCAnY291bnQnXSwgKGRpcikgPT4gdGhpcy5tb3ZlTGlzdFtkaXJdID0gMCk7XHJcblx0XHRcdFx0XHR0aGlzLmN0cmxEZWcgPSAxMjYwO1xyXG5cdFx0XHRcdFx0dGhpcy5iYWNrRGlyZWN0aW9uID0gdGhpcy5nZXRCYWNrRGlyKHRoaXMuZGVnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5lbGVtLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzRCgnICsgdGhpcy54ICsgJ3B4LCcgKyB0aGlzLnkgKyAncHgsIDBweCkgcm90YXRlKCcgKyB0aGlzLmRlZyArICdkZWcpJztcclxuXHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApO1xyXG5cdFx0fVxyXG5cdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApO1xyXG5cdH1cclxuXHRzZXRBcnJvd0RpcigpIHtcclxuXHRcdGlmICh0aGlzLm1vdmVMaXN0Wydjb3VudCddID09PSAxKSB7XHJcblx0XHRcdHRoaXMuZGVnID0gdGhpcy5tb3ZlTGlzdFsnbCddID8gLTkwIDogdGhpcy5tb3ZlTGlzdFsnciddID8gOTAgOiB0aGlzLm1vdmVMaXN0WydiJ10gPyAxODAgOiAwO1xyXG5cdFx0XHR0aGlzLmJhY2tEaXJlY3Rpb24gPSB0aGlzLm1vdmVMaXN0WydsJ10gPyAncicgOiB0aGlzLm1vdmVMaXN0WydyJ10gPyAnbCcgOiB0aGlzLm1vdmVMaXN0WydiJ10gPyAndCcgOiAnYic7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMubW92ZUxpc3RbJ2NvdW50J10gPT09IDIpIHtcclxuXHRcdFx0Y29uc3QgZGlyQXJyID0gWydsJywgJ3InLCAndCcsICdiJ107XHJcblx0XHRcdGNvbnN0IGQgPSAoZGlyQXJyLmZpbHRlcigoZGlyKSA9PiB0aGlzLm1vdmVMaXN0W2Rpcl0gPiAwKS5qb2luKCcnKSk7XHJcblx0XHRcdHN3aXRjaCAoZCkge1xyXG5cdFx0XHRcdGNhc2UgJ2x0JzpcclxuXHRcdFx0XHRcdHRoaXMuYmFja0RpcmVjdGlvbiA9ICdyYic7XHJcblx0XHRcdFx0XHR0aGlzLmRlZyA9IC00NTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJ2xiJzpcclxuXHRcdFx0XHRcdHRoaXMuYmFja0RpcmVjdGlvbiA9ICdydCc7XHJcblx0XHRcdFx0XHR0aGlzLmRlZyA9IC0xMzU7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlICdydCc6XHJcblx0XHRcdFx0XHR0aGlzLmJhY2tEaXJlY3Rpb24gPSAnbGInO1xyXG5cdFx0XHRcdFx0dGhpcy5kZWcgPSA0NTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJ3JiJzpcclxuXHRcdFx0XHRcdHRoaXMuYmFja0RpcmVjdGlvbiA9ICdsdCc7XHJcblx0XHRcdFx0XHR0aGlzLmRlZyA9IDEzNTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdH1cclxuXHR9XHJcblx0Z2V0QmFja0RpcihkZWcpIHtcclxuXHRcdGxldCBkID0gZGVnICUgMzYwO1xyXG5cdFx0c3dpdGNoIChkKSB7XHJcblx0XHRcdGNhc2UgMDpcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRkID0gJ2InO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRjYXNlIDQ1OlxyXG5cdFx0XHRjYXNlIC0zMTU6XHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0ZCA9ICdsYic7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9XHJcblx0XHRcdGNhc2UgOTA6XHJcblx0XHRcdGNhc2UgLTI3MDpcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRkID0gJ2wnO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRjYXNlIDEzNTpcclxuXHRcdFx0Y2FzZSAtMjI1OlxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGQgPSAnbHQnO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRjYXNlIDE4MDpcclxuXHRcdFx0Y2FzZSAtMTgwOlxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGQgPSAndCc7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9XHJcblx0XHRcdGNhc2UgLTQ1OlxyXG5cdFx0XHRjYXNlIDMxNTpcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRkID0gJ3JiJztcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0Y2FzZSAtOTA6XHJcblx0XHRcdGNhc2UgMjcwOlxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGQgPSAncic7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9XHJcblx0XHRcdGNhc2UgLTEzNTpcclxuXHRcdFx0Y2FzZSAyMjU6XHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0ZCA9ICdydCc7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZDtcclxuXHR9XHJcblx0Y29sbGlzaW9uKCkge1xyXG5cdFx0aWYgKHRoaXMubWlzc0N0cmwpIHJldHVybiBmYWxzZTtcclxuXHRcdHRoaXMubWlzc0N0cmwgPSB0cnVlO1xyXG5cdFx0bGV0IGFyciA9IHRoaXMuYmFja0RpcmVjdGlvbi5zcGxpdCgnJyk7XHJcblx0XHRBcnJheS5mcm9tKFsnbCcsICdyJywgJ3QnLCAnYiddLCAoZGlyKSA9PiB7XHJcblx0XHRcdHRoaXMubW92ZUxpc3RbZGlyXSA9IGFyci5pbmNsdWRlcyhkaXIpID8gMSA6IDA7XHJcblx0XHR9KTtcclxuXHR9XHJcbn07XHJcblxyXG4vKlxyXG4gKiDmoLnmja7mjInplK7lvpfliLDmlrnlkJFcclxuICovXHJcbmZ1bmN0aW9uIGdldERpcmVjdGlvbihjb2RlLCBwbGF5ZXIpIHtcclxuXHRzd2l0Y2ggKGNvZGUpIHtcclxuXHRcdGNhc2UgMzg6XHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZiAocGxheWVyICYmIHBsYXllciA9PT0gMSkgcmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdHJldHVybiAndCc7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdGNhc2UgNDA6XHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZiAocGxheWVyICYmIHBsYXllciA9PT0gMSkgcmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdHJldHVybiAnYic7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdGNhc2UgMzc6XHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZiAocGxheWVyICYmIHBsYXllciA9PT0gMSkgcmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdHJldHVybiAnbCc7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdGNhc2UgMzk6XHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZiAocGxheWVyICYmIHBsYXllciA9PT0gMSkgcmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdHJldHVybiAncic7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdGNhc2UgODc6XHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZiAocGxheWVyICYmIHBsYXllciA9PT0gMikgcmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdHJldHVybiAndCc7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdGNhc2UgODM6XHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZiAocGxheWVyICYmIHBsYXllciA9PT0gMikgcmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdHJldHVybiAnYic7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdGNhc2UgNjU6XHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZiAocGxheWVyICYmIHBsYXllciA9PT0gMikgcmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdHJldHVybiAnbCc7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdGNhc2UgNjg6XHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZiAocGxheWVyICYmIHBsYXllciA9PT0gMikgcmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdHJldHVybiAncic7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdGRlZmF1bHQ6XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHR9XHJcbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
