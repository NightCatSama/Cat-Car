define(["exports"],function(t){"use strict";function i(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var e=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),s={count:1,slideTime:.25,autoTimer:0,reverse:!0,width:void 0,height:void 0,direction:"horizontal",isLoop:!1,autoHide:"hide",prevBtn:void 0,nextBtn:void 0,index:0,pagination:!0},n=function(){function t(e,n){i(this,t),Object.assign(this,s,n),this.itemIndex=this.isLoop?this.count+this.index:this.index,this.isScroll=!1,this.events=[],this.init(e)}return e(t,[{key:"init",value:function(t){this.elem=t,this.prevBtn=this.prevBtn?document.querySelector(this.prevBtn):t.querySelector(".carousel-prevBtn"),this.nextBtn=this.nextBtn?document.querySelector(this.nextBtn):t.querySelector(".carousel-nextBtn"),this.wrap=t.querySelector(".carousel-wrap"),this.items=Array.from(this.wrap.querySelectorAll(".carousel-slide")),this.total=this.items.length,this.elem.classList.add("horizontal"===this.direction?"carousel-horizontal":"carousel-vertical"),this.initSize(),this.isLoop&&this.addSlide(),this.pagination&&this.createPagination(),this.initPos(),this.autoHide&&this.autoHideBtn()}},{key:"initSize",value:function(){var t=this;this.width&&(this.elem.style.width="number"==typeof this.width?this.width+"px":this.width),this.height&&(this.elem.style.height="number"==typeof this.height?this.height+"px":this.height),this.itemSize=100/this.count+"%",Array.from(this.items,function(i){return i.style["flex-basis"]=t.itemSize})}},{key:"addSlide",value:function(){for(var t=this,i=this.items.slice(this.total-this.count),e=i.length-1;e>=0;e--)this.wrap.insertBefore(i[e].cloneNode(!0),this.wrap.firstChild);Array.from(this.items.slice(0,this.count),function(i){return t.wrap.appendChild(i.cloneNode(!0))})}},{key:"initPos",value:function(){this.pos=-this.itemIndex,this.bindEvent(),this.setPosition(),this.setTransitionTime(this.slideTime)}},{key:"eventControl",value:function(t,i,e){for(var s,n=arguments.length,o=Array(n>3?n-3:0),h=3;h<n;h++)o[h-3]=arguments[h];e=(s=e).bind.apply(s,[this].concat(o)),t.addEventListener(i,e,!1),this.events.push(function(){return t.removeEventListener(i,e,!1)})}},{key:"bindEvent",value:function(){var t=this;this.prevBtn&&this.eventControl(this.prevBtn,"click",this.slidePrev),this.nextBtn&&this.eventControl(this.nextBtn,"click",this.slideNext),this.eventControl(this.wrap,"transitionend",this.slideEnd),this.autoTimer&&(this.timer=setInterval(function(){return t.slide(t.reverse?1:-1,"auto")},this.autoTimer))}},{key:"destoryEvent",value:function(){Array.from(this.events,function(t){return t()})}},{key:"destory",value:function(){this.destoryEvent(),this.elem.parentNode.removeChild(this.elem)}},{key:"slide",value:function(t,i){if(!t||this.isScroll)return!1;if("click"===i&&(clearInterval(this.timer),this.timer=null),!this.isLoop){var e=this.itemIndex-t;if(e>=this.total||e<0)return!1}this.index-=t,this.itemIndex-=t,this.pos=this.pos+t,this.isScroll=!0,this.setPosition(),this.pagination&&this.setPaginationActive(),this.autoHide&&this.autoHideBtn()}},{key:"slidePrev",value:function(){this.slide(1,"click")}},{key:"slideNext",value:function(){this.slide(-1,"click")}},{key:"slideTo",value:function(t){return t=(t+this.total)%this.total,t!==this.index&&void this.slide(this.index-t,"click")}},{key:"slideEnd",value:function(){var t=this;this.autoTimer&&!this.timer&&(this.timer=setInterval(function(){return t.slide(t.reverse?1:-1,"auto")},this.autoTimer));var i=this.isEnd();this.isLoop&&i&&(1===i?(this.pos=-this.total,this.itemIndex=this.total,this.index=this.total-1):(this.pos=-this.count,this.itemIndex=this.count,this.index=0),this.setTransitionTime(0),this.setPosition(),this.elem.offsetWidth,this.setTransitionTime(this.slideTime)),this.isScroll=!1}},{key:"setPosition",value:function(){var t=this.pos*(100/this.count),i="horizontal"===this.direction?"translate3d("+t+"%, 0%, 0)":"translate3d(0%, "+t+"%, 0)";this.wrap.style.transform=i,this.wrap.style.webkitTransform=i}},{key:"setTransitionTime",value:function(t){this.wrap.style.transitionDuration=t+"s",this.wrap.style.webkitTransitionDuration=t+"s"}},{key:"autoHideBtn",value:function(){!this.isLoop&&this.autoHide&&(this.itemIndex===this.total-this.count&&this.nextBtn&&this.nextBtn.classList.add("hide"),0===this.itemIndex&&this.prevBtn&&this.prevBtn.classList.add("hide"),this.itemIndex>0&&this.prevBtn&&this.prevBtn.classList.remove("hide"),this.itemIndex<this.total-this.count&&this.nextBtn&&this.nextBtn.classList.remove("hide"))}},{key:"isEnd",value:function(){return 0===this.itemIndex?1:this.itemIndex===this.total+this.count?2:0}},{key:"createPagination",value:function(t){this.pages=document.createElement("UL"),this.pages.className="carousel-pagination"+("string"==typeof this.pagination?" "+this.pagination:"");for(var i="",e=0;e<this.total;e++)i+='<li class="carousel-pagination-bullet"></li>';this.pages.innerHTML=i,this.elem.appendChild(this.pages),this.eventControl(this.pages,"click",this.clickPagination),this.curBullet=this.pages.children[this.index],this.curBullet.classList.add("carousel-pagination-bullet-active")}},{key:"setPaginationActive",value:function(){this.curBullet.classList.remove("carousel-pagination-bullet-active"),this.curBullet=this.pages.children[(this.index+this.total)%this.total],this.curBullet.classList.add("carousel-pagination-bullet-active")}},{key:"clickPagination",value:function(t){var i=t.target;if(!i.classList.contains("carousel-pagination-bullet"))return!1;i=i.previousSibling;for(var e=0;i;)i=i.previousSibling,e++;this.slideTo(e)}}]),t}(),o=function(t,i){function e(t){return t.carousel?t.carousel:t.carousel=new n(t,i)}var s=document.querySelectorAll(t);return 1===s.length?e(s[0]):Array.from(s,e)};t["default"]=o});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsdWdpbnMvY2Fyb3VzZWwuanMiXSwibmFtZXMiOlsiZGVmaW5lIiwiZXhwb3J0cyIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJfZGVmYXVsdCIsImNvdW50Iiwic2xpZGVUaW1lIiwiYXV0b1RpbWVyIiwicmV2ZXJzZSIsIndpZHRoIiwidW5kZWZpbmVkIiwiaGVpZ2h0IiwiZGlyZWN0aW9uIiwiaXNMb29wIiwiYXV0b0hpZGUiLCJwcmV2QnRuIiwibmV4dEJ0biIsImluZGV4IiwicGFnaW5hdGlvbiIsIkNhcm91c2VsIiwiZWxlbSIsIm9wdGlvbiIsInRoaXMiLCJhc3NpZ24iLCJpdGVtSW5kZXgiLCJpc1Njcm9sbCIsImV2ZW50cyIsImluaXQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ3cmFwIiwiaXRlbXMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwidG90YWwiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbml0U2l6ZSIsImFkZFNsaWRlIiwiY3JlYXRlUGFnaW5hdGlvbiIsImluaXRQb3MiLCJhdXRvSGlkZUJ0biIsIl90aGlzIiwic3R5bGUiLCJpdGVtU2l6ZSIsIl90aGlzMiIsImhlYWRlcnMiLCJzbGljZSIsImluc2VydEJlZm9yZSIsImNsb25lTm9kZSIsImZpcnN0Q2hpbGQiLCJ2IiwiYXBwZW5kQ2hpbGQiLCJwb3MiLCJiaW5kRXZlbnQiLCJzZXRQb3NpdGlvbiIsInNldFRyYW5zaXRpb25UaW1lIiwidHlwZSIsImZuIiwiX2ZuIiwiX2xlbiIsImFyZ3VtZW50cyIsImFyZyIsIl9rZXkiLCJiaW5kIiwiYXBwbHkiLCJjb25jYXQiLCJhZGRFdmVudExpc3RlbmVyIiwicHVzaCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfdGhpczMiLCJldmVudENvbnRyb2wiLCJzbGlkZVByZXYiLCJzbGlkZU5leHQiLCJzbGlkZUVuZCIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJzbGlkZSIsImRlc3RvcnlFdmVudCIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImRpciIsImNsZWFySW50ZXJ2YWwiLCJzdGF0dXMiLCJzZXRQYWdpbmF0aW9uQWN0aXZlIiwiX3RoaXM0IiwiaXNFbmQiLCJvZmZzZXRXaWR0aCIsIm1vdmVEaXN0YW5jZSIsInRyYW5zZm9ybSIsIndlYmtpdFRyYW5zZm9ybSIsInRpbWUiLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJ3ZWJraXRUcmFuc2l0aW9uRHVyYXRpb24iLCJyZW1vdmUiLCJjbGFzc05hbWUiLCJwYWdlcyIsImNyZWF0ZUVsZW1lbnQiLCJzdHIiLCJpbm5lckhUTUwiLCJjbGlja1BhZ2luYXRpb24iLCJjdXJCdWxsZXQiLCJjaGlsZHJlbiIsImUiLCJjb250YWlucyIsInByZXZpb3VzU2libGluZyIsInNsaWRlVG8iLCJlbnRyeSIsInNlbGVjdG9yIiwiY3JlYXRlQ2Fyb3VzZWwiLCJjYXJvdXNlbCIsImVsZW1zIl0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBUSxXQUFZLFNBQVVDLEdBQTlCLFlBT0MsU0FBU0MsR0FBZ0JDLEVBQVVDLEdBQ2xDLEtBQU1ELFlBQW9CQyxJQUN6QixLQUFNLElBQUlDLFdBQVUscUNBTnRCQyxPQUFPQyxlQUFlTixFQUFTLGNBQzlCTyxPQUFPLEdBU1IsSUFBSUMsR0FBZSxXQUNsQixRQUFTQyxHQUFpQkMsRUFBUUMsR0FDakMsSUFBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FDdEMsR0FBSUUsR0FBYUgsRUFBTUMsRUFDdkJFLEdB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ckgsT0FBcUJtSCxFQUFlRSxFQUFNLElBQzdDaEYsTUFBTUMsS0FBSytFLEVBQU9GLEdBZ0h6QmhJLEdBQUFBLFdBckdjOEgiLCJmaWxlIjoicGx1Z2lucy9jYXJvdXNlbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuXHJcbmxldCBfZGVmYXVsdCA9IHtcclxuXHRjb3VudDogMSxcclxuXHRzbGlkZVRpbWU6IDAuMjUsXHJcblx0YXV0b1RpbWVyOiAwLFxyXG5cdHJldmVyc2U6IHRydWUsXHJcblx0d2lkdGg6IHVuZGVmaW5lZCxcclxuXHRoZWlnaHQ6IHVuZGVmaW5lZCxcclxuXHRkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcclxuXHRpc0xvb3A6IGZhbHNlLFxyXG5cdGF1dG9IaWRlOiAnaGlkZScsXHJcblx0cHJldkJ0bjogdW5kZWZpbmVkLFxyXG5cdG5leHRCdG46IHVuZGVmaW5lZCxcclxuXHRpbmRleDogMCxcclxuXHRwYWdpbmF0aW9uOiB0cnVlLFxyXG59XHJcbmNsYXNzIENhcm91c2VsIHtcclxuXHRjb25zdHJ1Y3RvcihlbGVtLCBvcHRpb24pIHtcclxuXHRcdE9iamVjdC5hc3NpZ24odGhpcywgX2RlZmF1bHQsIG9wdGlvbik7XHJcblx0XHR0aGlzLml0ZW1JbmRleCA9IHRoaXMuaXNMb29wID8gKHRoaXMuY291bnQgKyB0aGlzLmluZGV4KSA6IHRoaXMuaW5kZXg7XHJcblx0XHR0aGlzLmlzU2Nyb2xsID0gZmFsc2U7XHJcblx0XHR0aGlzLmV2ZW50cyA9IFtdO1xyXG5cdFx0dGhpcy5pbml0KGVsZW0pO1xyXG5cdH1cclxuXHRpbml0KGVsZW0pIHtcclxuXHRcdHRoaXMuZWxlbSA9IGVsZW07XHJcblx0XHR0aGlzLnByZXZCdG4gPSB0aGlzLnByZXZCdG4gPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMucHJldkJ0bikgOiBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5jYXJvdXNlbC1wcmV2QnRuJyk7XHJcblx0XHR0aGlzLm5leHRCdG4gPSB0aGlzLm5leHRCdG4gPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMubmV4dEJ0bikgOiBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5jYXJvdXNlbC1uZXh0QnRuJyk7XHJcblx0XHR0aGlzLndyYXAgPSBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5jYXJvdXNlbC13cmFwJyk7XHJcblx0XHR0aGlzLml0ZW1zID0gQXJyYXkuZnJvbSh0aGlzLndyYXAucXVlcnlTZWxlY3RvckFsbCgnLmNhcm91c2VsLXNsaWRlJykpO1xyXG5cdFx0dGhpcy50b3RhbCA9IHRoaXMuaXRlbXMubGVuZ3RoO1xyXG5cdFx0dGhpcy5lbGVtLmNsYXNzTGlzdC5hZGQodGhpcy5kaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJyA/ICdjYXJvdXNlbC1ob3Jpem9udGFsJyA6ICdjYXJvdXNlbC12ZXJ0aWNhbCcpO1xyXG5cclxuXHRcdHRoaXMuaW5pdFNpemUoKTtcclxuXHRcdHRoaXMuaXNMb29wICYmIHRoaXMuYWRkU2xpZGUoKTtcclxuXHRcdHRoaXMucGFnaW5hdGlvbiAmJiB0aGlzLmNyZWF0ZVBhZ2luYXRpb24oKTtcclxuXHRcdHRoaXMuaW5pdFBvcygpO1xyXG5cdFx0dGhpcy5hdXRvSGlkZSAmJiB0aGlzLmF1dG9IaWRlQnRuKCk7XHJcblx0fVxyXG5cdGluaXRTaXplKCkge1xyXG5cdFx0aWYgKHRoaXMud2lkdGgpIHtcclxuXHRcdFx0dGhpcy5lbGVtLnN0eWxlLndpZHRoID0gdHlwZW9mIHRoaXMud2lkdGggPT09ICdudW1iZXInID8gKHRoaXMud2lkdGggKyAncHgnKSA6IHRoaXMud2lkdGg7XHJcblx0XHR9XHJcblx0XHRpZiAodGhpcy5oZWlnaHQpIHtcclxuXHRcdFx0dGhpcy5lbGVtLnN0eWxlLmhlaWdodCA9IHR5cGVvZiB0aGlzLmhlaWdodCA9PT0gJ251bWJlcicgPyAodGhpcy5oZWlnaHQgKyAncHgnKSA6IHRoaXMuaGVpZ2h0O1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5pdGVtU2l6ZSA9ICgxMDAgLyB0aGlzLmNvdW50KSArICclJztcclxuXHRcdEFycmF5LmZyb20odGhpcy5pdGVtcywgKGVsZW0pID0+IGVsZW0uc3R5bGVbJ2ZsZXgtYmFzaXMnXSA9IHRoaXMuaXRlbVNpemUpO1xyXG5cdH1cclxuXHRhZGRTbGlkZSgpIHtcclxuXHRcdGxldCBoZWFkZXJzID0gdGhpcy5pdGVtcy5zbGljZSh0aGlzLnRvdGFsIC0gdGhpcy5jb3VudCk7XHJcblx0XHRmb3IgKGxldCBpID0gaGVhZGVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG5cdFx0XHR0aGlzLndyYXAuaW5zZXJ0QmVmb3JlKGhlYWRlcnNbaV0uY2xvbmVOb2RlKHRydWUpLCB0aGlzLndyYXAuZmlyc3RDaGlsZClcclxuXHRcdH1cclxuXHRcdEFycmF5LmZyb20odGhpcy5pdGVtcy5zbGljZSgwLCB0aGlzLmNvdW50KSwgKHYpID0+IHRoaXMud3JhcC5hcHBlbmRDaGlsZCh2LmNsb25lTm9kZSh0cnVlKSkpO1xyXG5cdH1cclxuXHRpbml0UG9zKCkge1xyXG5cdFx0dGhpcy5wb3MgPSAtdGhpcy5pdGVtSW5kZXg7XHJcblx0XHR0aGlzLmJpbmRFdmVudCgpO1xyXG5cdFx0dGhpcy5zZXRQb3NpdGlvbigpO1xyXG5cdFx0dGhpcy5zZXRUcmFuc2l0aW9uVGltZSh0aGlzLnNsaWRlVGltZSk7XHJcblx0fVxyXG5cdGV2ZW50Q29udHJvbChlbGVtLCB0eXBlLCBmbiwgLi4uYXJnKXtcclxuXHRcdGZuID0gZm4uYmluZCh0aGlzLCAuLi5hcmcpO1xyXG5cdFx0ZWxlbS5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGZuLCBmYWxzZSk7XHJcblx0XHR0aGlzLmV2ZW50cy5wdXNoKCgpID0+IGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgZmFsc2UpKTtcclxuXHR9XHJcblx0YmluZEV2ZW50KCkge1xyXG5cdFx0dGhpcy5wcmV2QnRuICYmIHRoaXMuZXZlbnRDb250cm9sKHRoaXMucHJldkJ0biwgJ2NsaWNrJywgdGhpcy5zbGlkZVByZXYpO1xyXG5cdFx0dGhpcy5uZXh0QnRuICYmIHRoaXMuZXZlbnRDb250cm9sKHRoaXMubmV4dEJ0biwgJ2NsaWNrJywgdGhpcy5zbGlkZU5leHQpO1xyXG5cdFx0dGhpcy5ldmVudENvbnRyb2wodGhpcy53cmFwLCAndHJhbnNpdGlvbmVuZCcsIHRoaXMuc2xpZGVFbmQpO1xyXG5cdFx0aWYgKHRoaXMuYXV0b1RpbWVyKSB7XHJcblx0XHRcdHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzLnNsaWRlKHRoaXMucmV2ZXJzZSA/IDEgOiAtMSwgJ2F1dG8nKSwgdGhpcy5hdXRvVGltZXIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRkZXN0b3J5RXZlbnQoKSB7XHJcblx0XHRBcnJheS5mcm9tKHRoaXMuZXZlbnRzLCAoZm4pID0+IGZuKCkpO1xyXG5cdH1cclxuXHRkZXN0b3J5KCkge1xyXG5cdFx0dGhpcy5kZXN0b3J5RXZlbnQoKTtcclxuXHRcdHRoaXMuZWxlbS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbSk7XHJcblx0fVxyXG5cdHNsaWRlKGRpciwgdHlwZSkge1xyXG5cdFx0aWYgKCFkaXIgfHwgdGhpcy5pc1Njcm9sbCkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHRpZiAodHlwZSA9PT0gJ2NsaWNrJykge1xyXG5cdFx0XHRjbGVhckludGVydmFsKHRoaXMudGltZXIpO1xyXG5cdFx0XHR0aGlzLnRpbWVyID0gbnVsbDtcclxuXHRcdH1cclxuXHRcdGlmICghdGhpcy5pc0xvb3ApIHtcclxuXHRcdFx0bGV0IHN0YXR1cyA9IHRoaXMuaXRlbUluZGV4IC0gZGlyO1xyXG5cdFx0XHRpZiAoc3RhdHVzID49IHRoaXMudG90YWwgfHwgc3RhdHVzIDwgMCkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0dGhpcy5pbmRleCAtPSBkaXI7XHJcblx0XHR0aGlzLml0ZW1JbmRleCAtPSBkaXI7XHJcblx0XHR0aGlzLnBvcyA9IHRoaXMucG9zICsgZGlyO1xyXG5cdFx0dGhpcy5pc1Njcm9sbCA9IHRydWU7XHJcblx0XHR0aGlzLnNldFBvc2l0aW9uKCk7XHJcblx0XHR0aGlzLnBhZ2luYXRpb24gJiYgdGhpcy5zZXRQYWdpbmF0aW9uQWN0aXZlKCk7XHJcblx0XHR0aGlzLmF1dG9IaWRlICYmIHRoaXMuYXV0b0hpZGVCdG4oKTtcclxuXHR9XHJcblx0c2xpZGVQcmV2KCkge1xyXG5cdFx0dGhpcy5zbGlkZSgxLCAnY2xpY2snKTtcclxuXHR9XHJcblx0c2xpZGVOZXh0KCkge1xyXG5cdFx0dGhpcy5zbGlkZSgtMSwgJ2NsaWNrJyk7XHJcblx0fVxyXG5cdHNsaWRlVG8oaW5kZXgpIHtcclxuXHRcdGluZGV4ID0gKGluZGV4ICsgdGhpcy50b3RhbCkgJSB0aGlzLnRvdGFsO1xyXG5cdFx0aWYgKGluZGV4ID09PSB0aGlzLmluZGV4KSByZXR1cm4gZmFsc2U7XHJcblx0XHR0aGlzLnNsaWRlKHRoaXMuaW5kZXggLSBpbmRleCwgJ2NsaWNrJyk7XHJcblx0fVxyXG5cdHNsaWRlRW5kKCkge1xyXG5cdFx0aWYgKHRoaXMuYXV0b1RpbWVyICYmICF0aGlzLnRpbWVyKSB7XHJcblx0XHRcdHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzLnNsaWRlKHRoaXMucmV2ZXJzZSA/IDEgOiAtMSwgJ2F1dG8nKSwgdGhpcy5hdXRvVGltZXIpO1xyXG5cdFx0fVxyXG5cdFx0bGV0IHN0YXR1cyA9IHRoaXMuaXNFbmQoKTtcclxuXHRcdGlmICh0aGlzLmlzTG9vcCAmJiBzdGF0dXMpIHtcclxuXHRcdFx0aWYoc3RhdHVzID09PSAxKXtcclxuXHRcdFx0XHR0aGlzLnBvcyA9IC10aGlzLnRvdGFsO1xyXG5cdFx0XHRcdHRoaXMuaXRlbUluZGV4ID0gdGhpcy50b3RhbDtcclxuXHRcdFx0XHR0aGlzLmluZGV4ID0gdGhpcy50b3RhbCAtIDE7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5wb3MgPSAtdGhpcy5jb3VudDtcclxuXHRcdFx0XHR0aGlzLml0ZW1JbmRleCA9IHRoaXMuY291bnQ7XHJcblx0XHRcdFx0dGhpcy5pbmRleCA9IDA7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5zZXRUcmFuc2l0aW9uVGltZSgwKTtcclxuXHRcdFx0dGhpcy5zZXRQb3NpdGlvbigpO1xyXG5cdFx0XHR0aGlzLmVsZW0ub2Zmc2V0V2lkdGg7XHJcblx0XHRcdHRoaXMuc2V0VHJhbnNpdGlvblRpbWUodGhpcy5zbGlkZVRpbWUpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5pc1Njcm9sbCA9IGZhbHNlO1xyXG5cdH1cclxuXHRzZXRQb3NpdGlvbigpIHtcclxuXHRcdGxldCBtb3ZlRGlzdGFuY2UgPSB0aGlzLnBvcyAqICgxMDAgLyB0aGlzLmNvdW50KTtcclxuXHRcdGxldCB0cmFuc2Zvcm0gPSB0aGlzLmRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnID8gJ3RyYW5zbGF0ZTNkKCcgKyBtb3ZlRGlzdGFuY2UgKyAnJSwgMCUsIDApJyA6ICd0cmFuc2xhdGUzZCgwJSwgJyArIG1vdmVEaXN0YW5jZSArICclLCAwKSc7XHJcblx0XHR0aGlzLndyYXAuc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xyXG5cdFx0dGhpcy53cmFwLnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcclxuXHR9XHJcblx0c2V0VHJhbnNpdGlvblRpbWUodGltZSkge1xyXG5cdFx0dGhpcy53cmFwLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IHRpbWUgKyAncyc7XHJcblx0XHR0aGlzLndyYXAuc3R5bGUud2Via2l0VHJhbnNpdGlvbkR1cmF0aW9uID0gdGltZSArICdzJztcclxuXHR9XHJcblx0YXV0b0hpZGVCdG4oKSB7XHJcblx0XHRpZiAoIXRoaXMuaXNMb29wICYmIHRoaXMuYXV0b0hpZGUpIHtcclxuXHRcdFx0aWYgKHRoaXMuaXRlbUluZGV4ID09PSB0aGlzLnRvdGFsIC0gdGhpcy5jb3VudCkge1xyXG5cdFx0XHRcdHRoaXMubmV4dEJ0biAmJiB0aGlzLm5leHRCdG4uY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0aGlzLml0ZW1JbmRleCA9PT0gMCkge1xyXG5cdFx0XHRcdHRoaXMucHJldkJ0biAmJiB0aGlzLnByZXZCdG4uY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0aGlzLml0ZW1JbmRleCA+IDApIHtcclxuXHRcdFx0XHR0aGlzLnByZXZCdG4gJiYgdGhpcy5wcmV2QnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAodGhpcy5pdGVtSW5kZXggPCB0aGlzLnRvdGFsIC0gdGhpcy5jb3VudCkge1xyXG5cdFx0XHRcdHRoaXMubmV4dEJ0biAmJiB0aGlzLm5leHRCdG4uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdGlzRW5kKCkge1xyXG5cdFx0aWYgKHRoaXMuaXRlbUluZGV4ID09PSAwKSB7XHJcblx0XHRcdHJldHVybiAxO1xyXG5cdFx0fSBlbHNlIGlmICh0aGlzLml0ZW1JbmRleCA9PT0gKHRoaXMudG90YWwgKyB0aGlzLmNvdW50KSkge1xyXG5cdFx0XHRyZXR1cm4gMjtcclxuXHRcdH1cclxuXHRcdHJldHVybiAwO1xyXG5cdH1cclxuXHRjcmVhdGVQYWdpbmF0aW9uKGNsYXNzTmFtZSkge1xyXG5cdFx0dGhpcy5wYWdlcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ1VMJyk7XHJcblx0XHR0aGlzLnBhZ2VzLmNsYXNzTmFtZSA9IGBjYXJvdXNlbC1wYWdpbmF0aW9uJHt0eXBlb2YgdGhpcy5wYWdpbmF0aW9uID09PSAnc3RyaW5nJyA/ICgnICcgKyB0aGlzLnBhZ2luYXRpb24pIDogJyd9YDtcclxuXHRcdGxldCBzdHIgPSAnJztcclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50b3RhbDsgaSsrKSB7XHJcblx0XHRcdHN0ciArPSBgPGxpIGNsYXNzPVwiY2Fyb3VzZWwtcGFnaW5hdGlvbi1idWxsZXRcIj48L2xpPmA7XHJcblx0XHR9XHJcblx0XHR0aGlzLnBhZ2VzLmlubmVySFRNTCA9IHN0cjtcclxuXHRcdHRoaXMuZWxlbS5hcHBlbmRDaGlsZCh0aGlzLnBhZ2VzKTtcclxuXHJcblx0XHR0aGlzLmV2ZW50Q29udHJvbCh0aGlzLnBhZ2VzLCAnY2xpY2snLCB0aGlzLmNsaWNrUGFnaW5hdGlvbik7XHJcblxyXG5cdFx0dGhpcy5jdXJCdWxsZXQgPSB0aGlzLnBhZ2VzLmNoaWxkcmVuW3RoaXMuaW5kZXhdO1xyXG5cdFx0dGhpcy5jdXJCdWxsZXQuY2xhc3NMaXN0LmFkZCgnY2Fyb3VzZWwtcGFnaW5hdGlvbi1idWxsZXQtYWN0aXZlJyk7XHJcblx0fVxyXG5cdHNldFBhZ2luYXRpb25BY3RpdmUoKSB7XHJcblx0XHR0aGlzLmN1ckJ1bGxldC5jbGFzc0xpc3QucmVtb3ZlKCdjYXJvdXNlbC1wYWdpbmF0aW9uLWJ1bGxldC1hY3RpdmUnKTtcclxuXHRcdHRoaXMuY3VyQnVsbGV0ID0gdGhpcy5wYWdlcy5jaGlsZHJlblsodGhpcy5pbmRleCArIHRoaXMudG90YWwpICUgdGhpcy50b3RhbF07XHJcblx0XHR0aGlzLmN1ckJ1bGxldC5jbGFzc0xpc3QuYWRkKCdjYXJvdXNlbC1wYWdpbmF0aW9uLWJ1bGxldC1hY3RpdmUnKTtcclxuXHR9XHJcblx0Y2xpY2tQYWdpbmF0aW9uKGUpIHtcclxuXHRcdGxldCB0YXJnZXQgPSBlLnRhcmdldDtcclxuXHRcdGlmKCF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjYXJvdXNlbC1wYWdpbmF0aW9uLWJ1bGxldCcpKSByZXR1cm4gZmFsc2U7XHJcblx0XHR0YXJnZXQgPSB0YXJnZXQucHJldmlvdXNTaWJsaW5nO1xyXG4gICAgICAgIGxldCBpID0gMDtcclxuICAgICAgICB3aGlsZSAodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5wcmV2aW91c1NpYmxpbmc7XHJcbiAgICAgICAgICAgIGkrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zbGlkZVRvKGkpO1xyXG5cdH1cclxufVxyXG5cclxuY29uc3QgZW50cnkgPSAoc2VsZWN0b3IsIG9wdGlvbikgPT4ge1xyXG5cdGxldCBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xyXG5cdGlmIChlbGVtcy5sZW5ndGggPT09IDEpIHJldHVybiBjcmVhdGVDYXJvdXNlbChlbGVtc1swXSk7XHJcblx0cmV0dXJuIEFycmF5LmZyb20oZWxlbXMsIGNyZWF0ZUNhcm91c2VsKTtcclxuXHJcblx0ZnVuY3Rpb24gY3JlYXRlQ2Fyb3VzZWwoZWxlbSkge1xyXG5cdFx0aWYgKGVsZW0uY2Fyb3VzZWwpIHtcclxuXHRcdFx0cmV0dXJuIGVsZW0uY2Fyb3VzZWw7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZXR1cm4gZWxlbS5jYXJvdXNlbCA9IG5ldyBDYXJvdXNlbChlbGVtLCBvcHRpb24pO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZW50cnk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
