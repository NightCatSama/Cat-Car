define(["exports"],function(t){"use strict";function i(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var e=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),s={count:1,slideTime:.25,autoTimer:0,reverse:!0,width:void 0,height:void 0,direction:"horizontal",isLoop:!1,autoHide:"hide",prevBtn:void 0,nextBtn:void 0,index:0,pagination:!0},n=function(){function t(e,n){i(this,t),Object.assign(this,s,n),this.itemIndex=this.isLoop?this.count+this.index:this.index,this.isScroll=!1,this.events=[],this.init(e)}return e(t,[{key:"init",value:function(t){this.elem=t,this.prevBtn=this.prevBtn?document.querySelector(this.prevBtn):t.querySelector(".carousel-prevBtn"),this.nextBtn=this.nextBtn?document.querySelector(this.nextBtn):t.querySelector(".carousel-nextBtn"),this.wrap=t.querySelector(".carousel-wrap"),this.items=Array.from(this.wrap.querySelectorAll(".carousel-slide")),this.total=this.items.length,this.elem.classList.add("horizontal"===this.direction?"carousel-horizontal":"carousel-vertical"),this.initSize(),this.isLoop&&this.addSlide(),this.pagination&&this.createPagination(),this.initPos(),this.autoHide&&this.autoHideBtn()}},{key:"initSize",value:function(){var t=this;this.width?(this.elem.style.width="number"==typeof this.width?this.width+"px":this.width,this.width="number"==typeof this.width?this.width:this.elem.offsetWidth):this.width=this.elem.offsetWidth,this.height?(this.elem.style.height="number"==typeof this.height?this.height+"px":this.height,this.height="number"==typeof this.height?this.height:this.elem.offsetHeight):this.height=this.elem.offsetHeight,this.itemSize=100/this.count+"%",Array.from(this.items,function(i){return i.style["flex-basis"]=t.itemSize})}},{key:"addSlide",value:function(){for(var t=this,i=this.items.slice(this.total-this.count),e=i.length-1;e>=0;e--)this.wrap.insertBefore(i[e].cloneNode(!0),this.wrap.firstChild);Array.from(this.items.slice(0,this.count),function(i){return t.wrap.appendChild(i.cloneNode(!0))})}},{key:"initPos",value:function(){this.pos=-this.itemIndex,this.bindEvent(),this.setPosition(),this.setTransitionTime(this.slideTime)}},{key:"eventControl",value:function(t,i,e){for(var s,n=arguments.length,h=Array(n>3?n-3:0),o=3;o<n;o++)h[o-3]=arguments[o];console.log(h),e=(s=e).bind.apply(s,[this].concat(h)),t.addEventListener(i,e,!1),this.events.push(function(){return t.removeEventListener(i,e,!1)})}},{key:"bindEvent",value:function(){var t=this;this.prevBtn&&this.eventControl(this.prevBtn,"click",this.slide,1,"click"),this.nextBtn&&this.eventControl(this.nextBtn,"click",this.slide,-1,"click"),this.eventControl(this.wrap,"transitionend",this.slideEnd),this.autoTimer&&(this.timer=setInterval(function(){return t.slide(t.reverse?1:-1,"auto")},this.autoTimer))}},{key:"destoryEvent",value:function(){Array.from(this.events,function(t){return t()})}},{key:"destory",value:function(){this.destoryEvent(),this.elem.parentNode.removeChild(this.elem)}},{key:"slide",value:function(t,i){if(!t||this.isScroll)return!1;if("click"===i&&(clearInterval(this.timer),this.timer=null),!this.isLoop){var e=this.itemIndex-t;if(e>=this.total||e<0)return!1}this.index-=t,this.itemIndex-=t,this.pos=this.pos+t,this.isScroll=!0,this.setPosition(),this.pagination&&this.setPaginationActive()}},{key:"slideTo",value:function(t){return t=(t+this.total)%this.total,t!==this.index&&void this.slide(this.index-t,"click")}},{key:"slideEnd",value:function(){var t=this;this.autoTimer&&!this.timer&&(this.timer=setInterval(function(){return t.slide(t.reverse?1:-1,"auto")},this.autoTimer));var i=this.isEnd();this.isLoop&&i&&(1===i?(this.pos=-this.total,this.itemIndex=this.total,this.index=this.total-1):(this.pos=-this.count,this.itemIndex=this.count,this.index=0),this.setTransitionTime(0),this.setPosition(),this.elem.offsetWidth,this.setTransitionTime(this.slideTime)),this.autoHide&&this.autoHideBtn(),this.isScroll=!1}},{key:"setPosition",value:function(){var t=this.pos*(100/this.count),i="horizontal"===this.direction?"translate3d("+t+"%, 0%, 0)":"translate3d(0%, "+t+"%, 0)";this.wrap.style.transform=i,this.wrap.style.webkitTransform=i}},{key:"setTransitionTime",value:function(t){this.wrap.style.transitionDuration=t+"s",this.wrap.style.webkitTransitionDuration=t+"s"}},{key:"autoHideBtn",value:function(){!this.isLoop&&this.autoHide&&(this.itemIndex===this.total-this.count&&this.nextBtn&&this.nextBtn.classList.add("hide"),0===this.itemIndex&&this.prevBtn&&this.prevBtn.classList.add("hide"),this.itemIndex>0&&this.prevBtn&&this.prevBtn.classList.remove("hide"),this.itemIndex<this.total-this.count&&this.nextBtn&&this.nextBtn.classList.remove("hide"))}},{key:"isEnd",value:function(){return 0===this.itemIndex?1:this.itemIndex===this.total+this.count?2:0}},{key:"createPagination",value:function(t){this.pages=document.createElement("UL"),this.pages.className="carousel-pagination"+("string"==typeof this.pagination?" "+this.pagination:"");for(var i="",e=0;e<this.total;e++)i+='<li class="carousel-pagination-bullet"></li>';this.pages.innerHTML=i,this.elem.appendChild(this.pages),this.eventControl(this.pages,"click",this.clickPagination),this.curBullet=this.pages.children[this.index],this.curBullet.classList.add("carousel-pagination-bullet-active")}},{key:"setPaginationActive",value:function(){this.curBullet.classList.remove("carousel-pagination-bullet-active"),this.curBullet=this.pages.children[(this.index+this.total)%this.total],this.curBullet.classList.add("carousel-pagination-bullet-active")}},{key:"clickPagination",value:function(t){var i=t.target;if(!i.classList.contains("carousel-pagination-bullet"))return!1;i=i.previousSibling;for(var e=0;i;)i=i.previousSibling,e++;this.slideTo(e)}}]),t}(),h=function(t,i){function e(t){return t.carousel?t.carousel:t.carousel=new n(t,i)}var s=document.querySelectorAll(t);return 1===s.length?e(s[0]):Array.from(s,e)};t["default"]=h});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsdWdpbnMvY2Fyb3VzZWwuanMiXSwibmFtZXMiOlsiZGVmaW5lIiwiZXhwb3J0cyIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJfZGVmYXVsdCIsImNvdW50Iiwic2xpZGVUaW1lIiwiYXV0b1RpbWVyIiwicmV2ZXJzZSIsIndpZHRoIiwidW5kZWZpbmVkIiwiaGVpZ2h0IiwiZGlyZWN0aW9uIiwiaXNMb29wIiwiYXV0b0hpZGUiLCJwcmV2QnRuIiwibmV4dEJ0biIsImluZGV4IiwicGFnaW5hdGlvbiIsIkNhcm91c2VsIiwiZWxlbSIsIm9wdGlvbiIsInRoaXMiLCJhc3NpZ24iLCJpdGVtSW5kZXgiLCJpc1Njcm9sbCIsImV2ZW50cyIsImluaXQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ3cmFwIiwiaXRlbXMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwidG90YWwiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbml0U2l6ZSIsImFkZFNsaWRlIiwiY3JlYXRlUGFnaW5hdGlvbiIsImluaXRQb3MiLCJhdXRvSGlkZUJ0biIsIl90aGlzIiwic3R5bGUiLCJvZmZzZXRXaWR0aCIsIm9mZnNldEhlaWdodCIsIml0ZW1TaXplIiwiX3RoaXMyIiwiaGVhZGVycyIsInNsaWNlIiwiaW5zZXJ0QmVmb3JlIiwiY2xvbmVOb2RlIiwiZmlyc3RDaGlsZCIsInYiLCJhcHBlbmRDaGlsZCIsInBvcyIsImJpbmRFdmVudCIsInNldFBvc2l0aW9uIiwic2V0VHJhbnNpdGlvblRpbWUiLCJ0eXBlIiwiZm4iLCJfZm4iLCJfbGVuIiwiYXJndW1lbnRzIiwiYXJnIiwiX2tleSIsImNvbnNvbGUiLCJsb2ciLCJiaW5kIiwiYXBwbHkiLCJjb25jYXQiLCJhZGRFdmVudExpc3RlbmVyIiwicHVzaCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfdGhpczMiLCJldmVudENvbnRyb2wiLCJzbGlkZSIsInNsaWRlRW5kIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsImRlc3RvcnlFdmVudCIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImRpciIsImNsZWFySW50ZXJ2YWwiLCJzdGF0dXMiLCJzZXRQYWdpbmF0aW9uQWN0aXZlIiwiX3RoaXM0IiwiaXNFbmQiLCJtb3ZlRGlzdGFuY2UiLCJ0cmFuc2Zvcm0iLCJ3ZWJraXRUcmFuc2Zvcm0iLCJ0aW1lIiwidHJhbnNpdGlvbkR1cmF0aW9uIiwid2Via2l0VHJhbnNpdGlvbkR1cmF0aW9uIiwicmVtb3ZlIiwiY2xhc3NOYW1lIiwicGFnZXMiLCJjcmVhdGVFbGVtZW50Iiwic3RyIiwiaW5uZXJIVE1MIiwiY2xpY2tQYWdpbmF0aW9uIiwiY3VyQnVsbGV0IiwiY2hpbGRyZW4iLCJlIiwiY29udGFpbnMiLCJwcmV2aW91c1NpYmxpbmciLCJzbGlkZVRvIiwiZW50cnkiLCJzZWxlY3RvciIsImNyZWF0ZUNhcm91c2VsIiwiY2Fyb3VzZWwiLCJlbGVtcyJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQVEsV0FBWSxTQUFVQyxHQUE5QixZQU9DLFNBQVNDLEdBQWdCQyxFQUFVQyxHQUNsQyxLQUFNRCxZQUFvQkMsSUFDekIsS0FBTSxJQUFJQyxXQUFVLHFDQU50QkMsT0FBT0MsZUFBZU4sRUFBUyxjQUM5Qk8sT0FBTyxHQVNSLElBQUlDLEdBQWUsV0FDbEIsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQ2pDLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQ3RDLEdBQUlFLEdBQWFILEVBQU1DLEVBQ3ZCRSxHQUFXQyxXQUFhRCxFQUFXQyxhQUFjLEVBQ2pERCxFQUFXRSxjQUFlLEVBQ3RCLFNBQVdGLEtBQVlBLEVBQVdHLFVBQVcsR0FDakRaLE9BQU9DLGVBQWVJLEVBQVFJLEVBQVdJLElBQUtKLElBSWhELE1BQU8sVUFBVVgsRUFBYWdCLEVBQVlDLEdBR3pDLE1BRklELElBQVlWLEVBQWlCTixFQUFZa0IsVUFBV0YsR0FDcERDLEdBQWFYLEVBQWlCTixFQUFhaUIsR0FDeENqQixNQXpCTm1CLEdBQ0hDLE1BQU8sRUFDUEMsVUFBVyxJQUNYQyxVQUFXLEVBQ1hDLFNBQVMsRUFDVEMsTUFBT0MsT0FDUEMsT0FBUUQsT0FDUkUsVUFBVyxhQUNYQyxRQUFRLEVBQ1JDLFNBQVUsT0FDVkMsUUFBU0wsT0FDVE0sUUFBU04sT0FDVE8sTUFBTyxFQUNQQyxZQUFZLEdBRVBDLEVBOEJVLFdBN0JmLFFBQUFBLEdBQVlDLEVBQU1DLEdBQVF0QyxFQUFBdUMsS0FBQUgsR0FDekJoQyxPQUFPb0MsT0FBT0QsS0FBTWxCLEVBQVVpQixHQUM5QkMsS0FBS0UsVUFBWUYsS0FBS1QsT0FBVVMsS0FBS2pCLE1BQVFpQixLQUFLTCxNQUFTSyxLQUFLTCxNQUNoRUssS0FBS0csVUFBVyxFQUNoQkgsS0FBS0ksVUFDTEosS0FBS0ssS0FBS1AsR0FzUlYsTUFuUEE5QixHQUFhNkIsSUFDWm5CLElBQUssT0FDTFgsTUFBTyxTQW5DSitCLEdBQ0pFLEtBQUtGLEtBQU9BLEVBQ1pFLEtBQUtQLFFBQVVPLEtBQUtQLFFBQVVhLFNBQVNDLGNBQWNQLEtBQUtQLFNBQVdLLEVBQUtTLGNBQWMscUJBQ3hGUCxLQUFLTixRQUFVTSxLQUFLTixRQUFVWSxTQUFTQyxjQUFjUCxLQUFLTixTQUFXSSxFQUFLUyxjQUFjLHFCQUN4RlAsS0FBS1EsS0FBT1YsRUFBS1MsY0FBYyxrQkFDL0JQLEtBQUtTLE1BQVFDLE1BQU1DLEtBQUtYLEtBQUtRLEtBQUtJLGlCQUFpQixvQkFDbkRaLEtBQUthLE1BQVFiLEtBQUtTLE1BQU1wQyxPQUN4QjJCLEtBQUtGLEtBQUtnQixVQUFVQyxJQUF1QixlQUFuQmYsS0FBS1YsVUFBNkIsc0JBQXdCLHFCQUVsRlUsS0FBS2dCLFdBQ0xoQixLQUFLVCxRQUFVUyxLQUFLaUIsV0FDcEJqQixLQUFLSixZQUFjSSxLQUFLa0IsbUJBQ3hCbEIsS0FBS21CLFVBQ0xuQixLQUFLUixVQUFZUSxLQUFLb0IsaUJBc0NyQjFDLElBQUssV0FDTFgsTUFBTyxXQXJDRSxHQUFBc0QsR0FBQXJCLElBQ05BLE1BQUtiLE9BQ1JhLEtBQUtGLEtBQUt3QixNQUFNbkMsTUFBOEIsZ0JBQWZhLE1BQUtiLE1BQXNCYSxLQUFLYixNQUFRLEtBQVFhLEtBQUtiLE1BQ3BGYSxLQUFLYixNQUE4QixnQkFBZmEsTUFBS2IsTUFBcUJhLEtBQUtiLE1BQVFhLEtBQUtGLEtBQUt5QixhQUVyRXZCLEtBQUtiLE1BQVFhLEtBQUtGLEtBQUt5QixZQUVwQnZCLEtBQUtYLFFBQ1JXLEtBQUtGLEtBQUt3QixNQUFNakMsT0FBZ0MsZ0JBQWhCVyxNQUFLWCxPQUF1QlcsS0FBS1gsT0FBUyxLQUFRVyxLQUFLWCxPQUN2RlcsS0FBS1gsT0FBZ0MsZ0JBQWhCVyxNQUFLWCxPQUFzQlcsS0FBS1gsT0FBU1csS0FBS0YsS0FBSzBCLGNBRXhFeEIsS0FBS1gsT0FBU1csS0FBS0YsS0FBSzBCLGFBRXpCeEIsS0FBS3lCLFNBQVksSUFBTXpCLEtBQUtqQixNQUFTLElBQ3JDMkIsTUFBTUMsS0FBS1gsS0FBS1MsTUFBTyxTQUFDWCxHQUFELE1BQVVBLEdBQUt3QixNQUFNLGNBQWdCRCxFQUFLSSxjQTRDaEUvQyxJQUFLLFdBQ0xYLE1BQU8sV0F6Q1IsSUFBSyxHQUZLMkQsR0FBQTFCLEtBQ04yQixFQUFVM0IsS0FBS1MsTUFBTW1CLE1BQU01QixLQUFLYSxNQUFRYixLQUFLakIsT0FDeENYLEVBQUl1RCxFQUFRdEQsT0FBUyxFQUFHRCxHQUFLLEVBQUdBLElBQ3hDNEIsS0FBS1EsS0FBS3FCLGFBQWFGLEVBQVF2RCxHQUFHMEQsV0FBVSxHQUFPOUIsS0FBS1EsS0FBS3VCLFdBRTlEckIsT0FBTUMsS0FBS1gsS0FBS1MsTUFBTW1CLE1BQU0sRUFBRzVCLEtBQUtqQixPQUFRLFNBQUNpRCxHQUFELE1BQU9OLEdBQUtsQixLQUFLeUIsWUFBWUQsRUFBRUYsV0FBVSxTQWtEcEZwRCxJQUFLLFVBQ0xYLE1BQU8sV0FoRFJpQyxLQUFLa0MsS0FBT2xDLEtBQUtFLFVBQ2pCRixLQUFLbUMsWUFDTG5DLEtBQUtvQyxjQUNMcEMsS0FBS3FDLGtCQUFrQnJDLEtBQUtoQixjQW9EM0JOLElBQUssZUFDTFgsTUFBTyxTQW5ESStCLEVBQU13QyxFQUFNQyxHQUFXLElBQUEsR0FBQUMsR0FBQUMsRUFBQUMsVUFBQXJFLE9BQUpzRSxFQUFJakMsTUFBQStCLEVBQUEsRUFBQUEsRUFBQSxFQUFBLEdBQUFHLEVBQUEsRUFBQUEsRUFBQUgsRUFBQUcsSUFBSkQsRUFBSUMsRUFBQSxHQUFBRixVQUFBRSxFQUNuQ0MsU0FBUUMsSUFBSUgsR0FDWkosR0FBS0MsRUFBQUQsR0FBR1EsS0FBSEMsTUFBQVIsR0FBUXhDLE1BQVJpRCxPQUFpQk4sSUFDdEI3QyxFQUFLb0QsaUJBQWlCWixFQUFNQyxHQUFJLEdBQ2hDdkMsS0FBS0ksT0FBTytDLEtBQUssV0FBQSxNQUFNckQsR0FBS3NELG9CQUFvQmQsRUFBTUMsR0FBSSxRQThEekQ3RCxJQUFLLFlBQ0xYLE1BQU8sV0E3REcsR0FBQXNGLEdBQUFyRCxJQUNYQSxNQUFLUCxTQUFXTyxLQUFLc0QsYUFBYXRELEtBQUtQLFFBQVMsUUFBU08sS0FBS3VELE1BQU8sRUFBRyxTQUN4RXZELEtBQUtOLFNBQVdNLEtBQUtzRCxhQUFhdEQsS0FBS04sUUFBUyxRQUFTTSxLQUFLdUQsU0FBVyxTQUN6RXZELEtBQUtzRCxhQUFhdEQsS0FBS1EsS0FBTSxnQkFBaUJSLEtBQUt3RCxVQUMvQ3hELEtBQUtmLFlBQ1JlLEtBQUt5RCxNQUFRQyxZQUFZLFdBQUEsTUFBTUwsR0FBS0UsTUFBTUYsRUFBS25FLFFBQVUsS0FBUSxTQUFTYyxLQUFLZixlQXFFL0VQLElBQUssZUFDTFgsTUFBTyxXQWxFUjJDLE1BQU1DLEtBQUtYLEtBQUtJLE9BQVEsU0FBQ21DLEdBQUQsTUFBUUEsVUF3RS9CN0QsSUFBSyxVQUNMWCxNQUFPLFdBdEVSaUMsS0FBSzJELGVBQ0wzRCxLQUFLRixLQUFLOEQsV0FBV0MsWUFBWTdELEtBQUtGLFNBMEVyQ3BCLElBQUssUUFDTFgsTUFBTyxTQXpFSCtGLEVBQUt4QixHQUNWLElBQUt3QixHQUFPOUQsS0FBS0csU0FDaEIsT0FBTyxDQU1SLElBSmEsVUFBVG1DLElBQ0h5QixjQUFjL0QsS0FBS3lELE9BQ25CekQsS0FBS3lELE1BQVEsT0FFVHpELEtBQUtULE9BQVEsQ0FDakIsR0FBSXlFLEdBQVNoRSxLQUFLRSxVQUFZNEQsQ0FDOUIsSUFBSUUsR0FBVWhFLEtBQUthLE9BQVNtRCxFQUFTLEVBQ3BDLE9BQU8sRUFHVGhFLEtBQUtMLE9BQVNtRSxFQUNkOUQsS0FBS0UsV0FBYTRELEVBQ2xCOUQsS0FBS2tDLElBQU1sQyxLQUFLa0MsSUFBTTRCLEVBQ3RCOUQsS0FBS0csVUFBVyxFQUNoQkgsS0FBS29DLGNBQ0xwQyxLQUFLSixZQUFjSSxLQUFLaUUseUJBNEV2QnZGLElBQUssVUFDTFgsTUFBTyxTQTNFRDRCLEdBRVAsTUFEQUEsSUFBU0EsRUFBUUssS0FBS2EsT0FBU2IsS0FBS2EsTUFDaENsQixJQUFVSyxLQUFLTCxXQUNuQkssTUFBS3VELE1BQU12RCxLQUFLTCxNQUFRQSxFQUFPLFlBOEU5QmpCLElBQUssV0FDTFgsTUFBTyxXQTdFRSxHQUFBbUcsR0FBQWxFLElBQ05BLE1BQUtmLFlBQWNlLEtBQUt5RCxRQUMzQnpELEtBQUt5RCxNQUFRQyxZQUFZLFdBQUEsTUFBTVEsR0FBS1gsTUFBTVcsRUFBS2hGLFFBQVUsS0FBUSxTQUFTYyxLQUFLZixXQUVoRixJQUFJK0UsR0FBU2hFLEtBQUttRSxPQUNkbkUsTUFBS1QsUUFBVXlFLElBQ0osSUFBWEEsR0FDRmhFLEtBQUtrQyxLQUFPbEMsS0FBS2EsTUFDakJiLEtBQUtFLFVBQVlGLEtBQUthLE1BQ3RCYixLQUFLTCxNQUFRSyxLQUFLYSxNQUFRLElBRzFCYixLQUFLa0MsS0FBT2xDLEtBQUtqQixNQUNqQmlCLEtBQUtFLFVBQVlGLEtBQUtqQixNQUN0QmlCLEtBQUtMLE1BQVEsR0FFZEssS0FBS3FDLGtCQUFrQixHQUN2QnJDLEtBQUtvQyxjQUNMcEMsS0FBS0YsS0FBS3lCLFlBQ1Z2QixLQUFLcUMsa0JBQWtCckMsS0FBS2hCLFlBRTdCZ0IsS0FBS1IsVUFBWVEsS0FBS29CLGNBQ3RCcEIsS0FBS0csVUFBVyxLQW1GZnpCLElBQUssY0FDTFgsTUFBTyxXQWpGUixHQUFJcUcsR0FBZXBFLEtBQUtrQyxLQUFPLElBQU1sQyxLQUFLakIsT0FDdENzRixFQUErQixlQUFuQnJFLEtBQUtWLFVBQTZCLGVBQWlCOEUsRUFBZSxZQUFjLG1CQUFxQkEsRUFBZSxPQUNwSXBFLE1BQUtRLEtBQUtjLE1BQU0rQyxVQUFZQSxFQUM1QnJFLEtBQUtRLEtBQUtjLE1BQU1nRCxnQkFBa0JELEtBcUZqQzNGLElBQUssb0JBQ0xYLE1BQU8sU0FwRlN3RyxHQUNqQnZFLEtBQUtRLEtBQUtjLE1BQU1rRCxtQkFBcUJELEVBQU8sSUFDNUN2RSxLQUFLUSxLQUFLYyxNQUFNbUQseUJBQTJCRixFQUFPLE9BdUZqRDdGLElBQUssY0FDTFgsTUFBTyxZQXJGSGlDLEtBQUtULFFBQVVTLEtBQUtSLFdBQ3BCUSxLQUFLRSxZQUFjRixLQUFLYSxNQUFRYixLQUFLakIsT0FDeENpQixLQUFLTixTQUFXTSxLQUFLTixRQUFRb0IsVUFBVUMsSUFBSSxRQUVyQixJQUFuQmYsS0FBS0UsV0FDUkYsS0FBS1AsU0FBV08sS0FBS1AsUUFBUXFCLFVBQVVDLElBQUksUUFFeENmLEtBQUtFLFVBQVksR0FDcEJGLEtBQUtQLFNBQVdPLEtBQUtQLFFBQVFxQixVQUFVNEQsT0FBTyxRQUUzQzFFLEtBQUtFLFVBQVlGLEtBQUthLE1BQVFiLEtBQUtqQixPQUN0Q2lCLEtBQUtOLFNBQVdNLEtBQUtOLFFBQVFvQixVQUFVNEQsT0FBTyxZQTJGL0NoRyxJQUFLLFFBQ0xYLE1BQU8sV0F2RlIsTUFBdUIsS0FBbkJpQyxLQUFLRSxVQUNELEVBQ0dGLEtBQUtFLFlBQWVGLEtBQUthLE1BQVFiLEtBQUtqQixNQUN6QyxFQUVELEtBMkZOTCxJQUFLLG1CQUNMWCxNQUFPLFNBMUZRNEcsR0FDaEIzRSxLQUFLNEUsTUFBUXRFLFNBQVN1RSxjQUFjLE1BQ3BDN0UsS0FBSzRFLE1BQU1ELFVBQVgsdUJBQXdFLGdCQUFwQjNFLE1BQUtKLFdBQTJCLElBQU1JLEtBQUtKLFdBQWMsR0FFN0csS0FBSyxHQUREa0YsR0FBTSxHQUNEMUcsRUFBSSxFQUFHQSxFQUFJNEIsS0FBS2EsTUFBT3pDLElBQy9CMEcsR0FBQSw4Q0FFRDlFLE1BQUs0RSxNQUFNRyxVQUFZRCxFQUN2QjlFLEtBQUtGLEtBQUttQyxZQUFZakMsS0FBSzRFLE9BRTNCNUUsS0FBS3NELGFBQWF0RCxLQUFLNEUsTUFBTyxRQUFTNUUsS0FBS2dGLGlCQUU1Q2hGLEtBQUtpRixVQUFZakYsS0FBSzRFLE1BQU1NLFNBQVNsRixLQUFLTCxPQUMxQ0ssS0FBS2lGLFVBQVVuRSxVQUFVQyxJQUFJLHdDQTZGNUJyQyxJQUFLLHNCQUNMWCxNQUFPLFdBM0ZSaUMsS0FBS2lGLFVBQVVuRSxVQUFVNEQsT0FBTyxxQ0FDaEMxRSxLQUFLaUYsVUFBWWpGLEtBQUs0RSxNQUFNTSxVQUFVbEYsS0FBS0wsTUFBUUssS0FBS2EsT0FBU2IsS0FBS2EsT0FDdEViLEtBQUtpRixVQUFVbkUsVUFBVUMsSUFBSSx3Q0ErRjVCckMsSUFBSyxrQkFDTFgsTUFBTyxTQTlGT29ILEdBQ2YsR0FBSWpILEdBQVNpSCxFQUFFakgsTUFDZixLQUFJQSxFQUFPNEMsVUFBVXNFLFNBQVMsOEJBQStCLE9BQU8sQ0FDcEVsSCxHQUFTQSxFQUFPbUgsZUFFVixLQURBLEdBQUlqSCxHQUFJLEVBQ0RGLEdBQ0hBLEVBQVNBLEVBQU9tSCxnQkFDaEJqSCxHQUVKNEIsTUFBS3NGLFFBQVFsSCxPQWtHWnlCLEtBN0ZIMEYsRUFBUSxTQUFDQyxFQUFVekYsR0FLeEIsUUFBUzBGLEdBQWUzRixHQUN2QixNQUFJQSxHQUFLNEYsU0FDRDVGLEVBQUs0RixTQUVMNUYsRUFBSzRGLFNBQVcsR0FBSTdGLEdBQVNDLEVBQU1DLEdBUjVDLEdBQUk0RixHQUFRckYsU0FBU00saUJBQWlCNEUsRUFDdEMsT0FBcUIsS0FBakJHLEVBQU10SCxPQUFxQm9ILEVBQWVFLEVBQU0sSUFDN0NqRixNQUFNQyxLQUFLZ0YsRUFBT0YsR0E0R3pCakksR0FBQUEsV0FqR2MrSCIsImZpbGUiOiJwbHVnaW5zL2Nhcm91c2VsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxubGV0IF9kZWZhdWx0ID0ge1xyXG5cdGNvdW50OiAxLFxyXG5cdHNsaWRlVGltZTogMC4yNSxcclxuXHRhdXRvVGltZXI6IDAsXHJcblx0cmV2ZXJzZTogdHJ1ZSxcclxuXHR3aWR0aDogdW5kZWZpbmVkLFxyXG5cdGhlaWdodDogdW5kZWZpbmVkLFxyXG5cdGRpcmVjdGlvbjogJ2hvcml6b250YWwnLFxyXG5cdGlzTG9vcDogZmFsc2UsXHJcblx0YXV0b0hpZGU6ICdoaWRlJyxcclxuXHRwcmV2QnRuOiB1bmRlZmluZWQsXHJcblx0bmV4dEJ0bjogdW5kZWZpbmVkLFxyXG5cdGluZGV4OiAwLFxyXG5cdHBhZ2luYXRpb246IHRydWUsXHJcbn1cclxuY2xhc3MgQ2Fyb3VzZWwge1xyXG5cdGNvbnN0cnVjdG9yKGVsZW0sIG9wdGlvbikge1xyXG5cdFx0T2JqZWN0LmFzc2lnbih0aGlzLCBfZGVmYXVsdCwgb3B0aW9uKTtcclxuXHRcdHRoaXMuaXRlbUluZGV4ID0gdGhpcy5pc0xvb3AgPyAodGhpcy5jb3VudCArIHRoaXMuaW5kZXgpIDogdGhpcy5pbmRleDtcclxuXHRcdHRoaXMuaXNTY3JvbGwgPSBmYWxzZTtcclxuXHRcdHRoaXMuZXZlbnRzID0gW107XHJcblx0XHR0aGlzLmluaXQoZWxlbSk7XHJcblx0fVxyXG5cdGluaXQoZWxlbSkge1xyXG5cdFx0dGhpcy5lbGVtID0gZWxlbTtcclxuXHRcdHRoaXMucHJldkJ0biA9IHRoaXMucHJldkJ0biA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5wcmV2QnRuKSA6IGVsZW0ucXVlcnlTZWxlY3RvcignLmNhcm91c2VsLXByZXZCdG4nKTtcclxuXHRcdHRoaXMubmV4dEJ0biA9IHRoaXMubmV4dEJ0biA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5uZXh0QnRuKSA6IGVsZW0ucXVlcnlTZWxlY3RvcignLmNhcm91c2VsLW5leHRCdG4nKTtcclxuXHRcdHRoaXMud3JhcCA9IGVsZW0ucXVlcnlTZWxlY3RvcignLmNhcm91c2VsLXdyYXAnKTtcclxuXHRcdHRoaXMuaXRlbXMgPSBBcnJheS5mcm9tKHRoaXMud3JhcC5xdWVyeVNlbGVjdG9yQWxsKCcuY2Fyb3VzZWwtc2xpZGUnKSk7XHJcblx0XHR0aGlzLnRvdGFsID0gdGhpcy5pdGVtcy5sZW5ndGg7XHJcblx0XHR0aGlzLmVsZW0uY2xhc3NMaXN0LmFkZCh0aGlzLmRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnID8gJ2Nhcm91c2VsLWhvcml6b250YWwnIDogJ2Nhcm91c2VsLXZlcnRpY2FsJyk7XHJcblxyXG5cdFx0dGhpcy5pbml0U2l6ZSgpO1xyXG5cdFx0dGhpcy5pc0xvb3AgJiYgdGhpcy5hZGRTbGlkZSgpO1xyXG5cdFx0dGhpcy5wYWdpbmF0aW9uICYmIHRoaXMuY3JlYXRlUGFnaW5hdGlvbigpO1xyXG5cdFx0dGhpcy5pbml0UG9zKCk7XHJcblx0XHR0aGlzLmF1dG9IaWRlICYmIHRoaXMuYXV0b0hpZGVCdG4oKTtcclxuXHR9XHJcblx0aW5pdFNpemUoKSB7XHJcblx0XHRpZiAodGhpcy53aWR0aCkge1xyXG5cdFx0XHR0aGlzLmVsZW0uc3R5bGUud2lkdGggPSB0eXBlb2YgdGhpcy53aWR0aCA9PT0gJ251bWJlcicgPyAodGhpcy53aWR0aCArICdweCcpIDogdGhpcy53aWR0aDtcclxuXHRcdFx0dGhpcy53aWR0aCA9IHR5cGVvZiB0aGlzLndpZHRoID09PSAnbnVtYmVyJyA/IHRoaXMud2lkdGggOiB0aGlzLmVsZW0ub2Zmc2V0V2lkdGg7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLndpZHRoID0gdGhpcy5lbGVtLm9mZnNldFdpZHRoO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHRoaXMuaGVpZ2h0KSB7XHJcblx0XHRcdHRoaXMuZWxlbS5zdHlsZS5oZWlnaHQgPSB0eXBlb2YgdGhpcy5oZWlnaHQgPT09ICdudW1iZXInID8gKHRoaXMuaGVpZ2h0ICsgJ3B4JykgOiB0aGlzLmhlaWdodDtcclxuXHRcdFx0dGhpcy5oZWlnaHQgPSB0eXBlb2YgdGhpcy5oZWlnaHQgPT09ICdudW1iZXInID8gdGhpcy5oZWlnaHQgOiB0aGlzLmVsZW0ub2Zmc2V0SGVpZ2h0O1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5oZWlnaHQgPSB0aGlzLmVsZW0ub2Zmc2V0SGVpZ2h0O1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5pdGVtU2l6ZSA9ICgxMDAgLyB0aGlzLmNvdW50KSArICclJztcclxuXHRcdEFycmF5LmZyb20odGhpcy5pdGVtcywgKGVsZW0pID0+IGVsZW0uc3R5bGVbJ2ZsZXgtYmFzaXMnXSA9IHRoaXMuaXRlbVNpemUpO1xyXG5cdH1cclxuXHRhZGRTbGlkZSgpIHtcclxuXHRcdGxldCBoZWFkZXJzID0gdGhpcy5pdGVtcy5zbGljZSh0aGlzLnRvdGFsIC0gdGhpcy5jb3VudCk7XHJcblx0XHRmb3IgKGxldCBpID0gaGVhZGVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG5cdFx0XHR0aGlzLndyYXAuaW5zZXJ0QmVmb3JlKGhlYWRlcnNbaV0uY2xvbmVOb2RlKHRydWUpLCB0aGlzLndyYXAuZmlyc3RDaGlsZClcclxuXHRcdH1cclxuXHRcdEFycmF5LmZyb20odGhpcy5pdGVtcy5zbGljZSgwLCB0aGlzLmNvdW50KSwgKHYpID0+IHRoaXMud3JhcC5hcHBlbmRDaGlsZCh2LmNsb25lTm9kZSh0cnVlKSkpO1xyXG5cdH1cclxuXHRpbml0UG9zKCkge1xyXG5cdFx0dGhpcy5wb3MgPSAtdGhpcy5pdGVtSW5kZXg7XHJcblx0XHR0aGlzLmJpbmRFdmVudCgpO1xyXG5cdFx0dGhpcy5zZXRQb3NpdGlvbigpO1xyXG5cdFx0dGhpcy5zZXRUcmFuc2l0aW9uVGltZSh0aGlzLnNsaWRlVGltZSk7XHJcblx0fVxyXG5cdGV2ZW50Q29udHJvbChlbGVtLCB0eXBlLCBmbiwgLi4uYXJnKXtcclxuXHRcdGNvbnNvbGUubG9nKGFyZyk7XHJcblx0XHRmbiA9IGZuLmJpbmQodGhpcywgLi4uYXJnKTtcclxuXHRcdGVsZW0uYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgZmFsc2UpO1xyXG5cdFx0dGhpcy5ldmVudHMucHVzaCgoKSA9PiBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgZm4sIGZhbHNlKSk7XHJcblx0fVxyXG5cdGJpbmRFdmVudCgpIHtcclxuXHRcdHRoaXMucHJldkJ0biAmJiB0aGlzLmV2ZW50Q29udHJvbCh0aGlzLnByZXZCdG4sICdjbGljaycsIHRoaXMuc2xpZGUsIDEsICdjbGljaycpO1xyXG5cdFx0dGhpcy5uZXh0QnRuICYmIHRoaXMuZXZlbnRDb250cm9sKHRoaXMubmV4dEJ0biwgJ2NsaWNrJywgdGhpcy5zbGlkZSwgLTEsICdjbGljaycpO1xyXG5cdFx0dGhpcy5ldmVudENvbnRyb2wodGhpcy53cmFwLCAndHJhbnNpdGlvbmVuZCcsIHRoaXMuc2xpZGVFbmQpO1xyXG5cdFx0aWYgKHRoaXMuYXV0b1RpbWVyKSB7XHJcblx0XHRcdHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzLnNsaWRlKHRoaXMucmV2ZXJzZSA/IDEgOiAtMSwgJ2F1dG8nKSwgdGhpcy5hdXRvVGltZXIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRkZXN0b3J5RXZlbnQoKSB7XHJcblx0XHRBcnJheS5mcm9tKHRoaXMuZXZlbnRzLCAoZm4pID0+IGZuKCkpO1xyXG5cdH1cclxuXHRkZXN0b3J5KCkge1xyXG5cdFx0dGhpcy5kZXN0b3J5RXZlbnQoKTtcclxuXHRcdHRoaXMuZWxlbS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbSk7XHJcblx0fVxyXG5cdHNsaWRlKGRpciwgdHlwZSkge1xyXG5cdFx0aWYgKCFkaXIgfHwgdGhpcy5pc1Njcm9sbCkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHRpZiAodHlwZSA9PT0gJ2NsaWNrJykge1xyXG5cdFx0XHRjbGVhckludGVydmFsKHRoaXMudGltZXIpO1xyXG5cdFx0XHR0aGlzLnRpbWVyID0gbnVsbDtcclxuXHRcdH1cclxuXHRcdGlmICghdGhpcy5pc0xvb3ApIHtcclxuXHRcdFx0bGV0IHN0YXR1cyA9IHRoaXMuaXRlbUluZGV4IC0gZGlyO1xyXG5cdFx0XHRpZiAoc3RhdHVzID49IHRoaXMudG90YWwgfHwgc3RhdHVzIDwgMCkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0dGhpcy5pbmRleCAtPSBkaXI7XHJcblx0XHR0aGlzLml0ZW1JbmRleCAtPSBkaXI7XHJcblx0XHR0aGlzLnBvcyA9IHRoaXMucG9zICsgZGlyO1xyXG5cdFx0dGhpcy5pc1Njcm9sbCA9IHRydWU7XHJcblx0XHR0aGlzLnNldFBvc2l0aW9uKCk7XHJcblx0XHR0aGlzLnBhZ2luYXRpb24gJiYgdGhpcy5zZXRQYWdpbmF0aW9uQWN0aXZlKCk7XHJcblx0fVxyXG5cdHNsaWRlVG8oaW5kZXgpIHtcclxuXHRcdGluZGV4ID0gKGluZGV4ICsgdGhpcy50b3RhbCkgJSB0aGlzLnRvdGFsO1xyXG5cdFx0aWYgKGluZGV4ID09PSB0aGlzLmluZGV4KSByZXR1cm4gZmFsc2U7XHJcblx0XHR0aGlzLnNsaWRlKHRoaXMuaW5kZXggLSBpbmRleCwgJ2NsaWNrJyk7XHJcblx0fVxyXG5cdHNsaWRlRW5kKCkge1xyXG5cdFx0aWYgKHRoaXMuYXV0b1RpbWVyICYmICF0aGlzLnRpbWVyKSB7XHJcblx0XHRcdHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzLnNsaWRlKHRoaXMucmV2ZXJzZSA/IDEgOiAtMSwgJ2F1dG8nKSwgdGhpcy5hdXRvVGltZXIpO1xyXG5cdFx0fVxyXG5cdFx0bGV0IHN0YXR1cyA9IHRoaXMuaXNFbmQoKTtcclxuXHRcdGlmICh0aGlzLmlzTG9vcCAmJiBzdGF0dXMpIHtcclxuXHRcdFx0aWYoc3RhdHVzID09PSAxKXtcclxuXHRcdFx0XHR0aGlzLnBvcyA9IC10aGlzLnRvdGFsO1xyXG5cdFx0XHRcdHRoaXMuaXRlbUluZGV4ID0gdGhpcy50b3RhbDtcclxuXHRcdFx0XHR0aGlzLmluZGV4ID0gdGhpcy50b3RhbCAtIDE7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5wb3MgPSAtdGhpcy5jb3VudDtcclxuXHRcdFx0XHR0aGlzLml0ZW1JbmRleCA9IHRoaXMuY291bnQ7XHJcblx0XHRcdFx0dGhpcy5pbmRleCA9IDA7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5zZXRUcmFuc2l0aW9uVGltZSgwKTtcclxuXHRcdFx0dGhpcy5zZXRQb3NpdGlvbigpO1xyXG5cdFx0XHR0aGlzLmVsZW0ub2Zmc2V0V2lkdGg7XHJcblx0XHRcdHRoaXMuc2V0VHJhbnNpdGlvblRpbWUodGhpcy5zbGlkZVRpbWUpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5hdXRvSGlkZSAmJiB0aGlzLmF1dG9IaWRlQnRuKCk7XHJcblx0XHR0aGlzLmlzU2Nyb2xsID0gZmFsc2U7XHJcblx0fVxyXG5cdHNldFBvc2l0aW9uKCkge1xyXG5cdFx0bGV0IG1vdmVEaXN0YW5jZSA9IHRoaXMucG9zICogKDEwMCAvIHRoaXMuY291bnQpO1xyXG5cdFx0bGV0IHRyYW5zZm9ybSA9IHRoaXMuZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcgPyAndHJhbnNsYXRlM2QoJyArIG1vdmVEaXN0YW5jZSArICclLCAwJSwgMCknIDogJ3RyYW5zbGF0ZTNkKDAlLCAnICsgbW92ZURpc3RhbmNlICsgJyUsIDApJztcclxuXHRcdHRoaXMud3JhcC5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XHJcblx0XHR0aGlzLndyYXAuc3R5bGUud2Via2l0VHJhbnNmb3JtID0gdHJhbnNmb3JtO1xyXG5cdH1cclxuXHRzZXRUcmFuc2l0aW9uVGltZSh0aW1lKSB7XHJcblx0XHR0aGlzLndyYXAuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gdGltZSArICdzJztcclxuXHRcdHRoaXMud3JhcC5zdHlsZS53ZWJraXRUcmFuc2l0aW9uRHVyYXRpb24gPSB0aW1lICsgJ3MnO1xyXG5cdH1cclxuXHRhdXRvSGlkZUJ0bigpIHtcclxuXHRcdGlmICghdGhpcy5pc0xvb3AgJiYgdGhpcy5hdXRvSGlkZSkge1xyXG5cdFx0XHRpZiAodGhpcy5pdGVtSW5kZXggPT09IHRoaXMudG90YWwgLSB0aGlzLmNvdW50KSB7XHJcblx0XHRcdFx0dGhpcy5uZXh0QnRuICYmIHRoaXMubmV4dEJ0bi5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHRoaXMuaXRlbUluZGV4ID09PSAwKSB7XHJcblx0XHRcdFx0dGhpcy5wcmV2QnRuICYmIHRoaXMucHJldkJ0bi5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHRoaXMuaXRlbUluZGV4ID4gMCkge1xyXG5cdFx0XHRcdHRoaXMucHJldkJ0biAmJiB0aGlzLnByZXZCdG4uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0aGlzLml0ZW1JbmRleCA8IHRoaXMudG90YWwgLSB0aGlzLmNvdW50KSB7XHJcblx0XHRcdFx0dGhpcy5uZXh0QnRuICYmIHRoaXMubmV4dEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0aXNFbmQoKSB7XHJcblx0XHRpZiAodGhpcy5pdGVtSW5kZXggPT09IDApIHtcclxuXHRcdFx0cmV0dXJuIDE7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMuaXRlbUluZGV4ID09PSAodGhpcy50b3RhbCArIHRoaXMuY291bnQpKSB7XHJcblx0XHRcdHJldHVybiAyO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIDA7XHJcblx0fVxyXG5cdGNyZWF0ZVBhZ2luYXRpb24oY2xhc3NOYW1lKSB7XHJcblx0XHR0aGlzLnBhZ2VzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnVUwnKTtcclxuXHRcdHRoaXMucGFnZXMuY2xhc3NOYW1lID0gYGNhcm91c2VsLXBhZ2luYXRpb24ke3R5cGVvZiB0aGlzLnBhZ2luYXRpb24gPT09ICdzdHJpbmcnID8gKCcgJyArIHRoaXMucGFnaW5hdGlvbikgOiAnJ31gO1xyXG5cdFx0bGV0IHN0ciA9ICcnO1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRvdGFsOyBpKyspIHtcclxuXHRcdFx0c3RyICs9IGA8bGkgY2xhc3M9XCJjYXJvdXNlbC1wYWdpbmF0aW9uLWJ1bGxldFwiPjwvbGk+YDtcclxuXHRcdH1cclxuXHRcdHRoaXMucGFnZXMuaW5uZXJIVE1MID0gc3RyO1xyXG5cdFx0dGhpcy5lbGVtLmFwcGVuZENoaWxkKHRoaXMucGFnZXMpO1xyXG5cclxuXHRcdHRoaXMuZXZlbnRDb250cm9sKHRoaXMucGFnZXMsICdjbGljaycsIHRoaXMuY2xpY2tQYWdpbmF0aW9uKTtcclxuXHJcblx0XHR0aGlzLmN1ckJ1bGxldCA9IHRoaXMucGFnZXMuY2hpbGRyZW5bdGhpcy5pbmRleF07XHJcblx0XHR0aGlzLmN1ckJ1bGxldC5jbGFzc0xpc3QuYWRkKCdjYXJvdXNlbC1wYWdpbmF0aW9uLWJ1bGxldC1hY3RpdmUnKTtcclxuXHR9XHJcblx0c2V0UGFnaW5hdGlvbkFjdGl2ZSgpIHtcclxuXHRcdHRoaXMuY3VyQnVsbGV0LmNsYXNzTGlzdC5yZW1vdmUoJ2Nhcm91c2VsLXBhZ2luYXRpb24tYnVsbGV0LWFjdGl2ZScpO1xyXG5cdFx0dGhpcy5jdXJCdWxsZXQgPSB0aGlzLnBhZ2VzLmNoaWxkcmVuWyh0aGlzLmluZGV4ICsgdGhpcy50b3RhbCkgJSB0aGlzLnRvdGFsXTtcclxuXHRcdHRoaXMuY3VyQnVsbGV0LmNsYXNzTGlzdC5hZGQoJ2Nhcm91c2VsLXBhZ2luYXRpb24tYnVsbGV0LWFjdGl2ZScpO1xyXG5cdH1cclxuXHRjbGlja1BhZ2luYXRpb24oZSkge1xyXG5cdFx0bGV0IHRhcmdldCA9IGUudGFyZ2V0O1xyXG5cdFx0aWYoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Nhcm91c2VsLXBhZ2luYXRpb24tYnVsbGV0JykpIHJldHVybiBmYWxzZTtcclxuXHRcdHRhcmdldCA9IHRhcmdldC5wcmV2aW91c1NpYmxpbmc7XHJcbiAgICAgICAgbGV0IGkgPSAwO1xyXG4gICAgICAgIHdoaWxlICh0YXJnZXQpIHtcclxuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnByZXZpb3VzU2libGluZztcclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNsaWRlVG8oaSk7XHJcblx0fVxyXG59XHJcblxyXG4vLyDlhaXlj6Pmlofku7ZcclxuY29uc3QgZW50cnkgPSAoc2VsZWN0b3IsIG9wdGlvbikgPT4ge1xyXG5cdGxldCBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xyXG5cdGlmIChlbGVtcy5sZW5ndGggPT09IDEpIHJldHVybiBjcmVhdGVDYXJvdXNlbChlbGVtc1swXSk7XHJcblx0cmV0dXJuIEFycmF5LmZyb20oZWxlbXMsIGNyZWF0ZUNhcm91c2VsKTtcclxuXHJcblx0ZnVuY3Rpb24gY3JlYXRlQ2Fyb3VzZWwoZWxlbSkge1xyXG5cdFx0aWYgKGVsZW0uY2Fyb3VzZWwpIHtcclxuXHRcdFx0cmV0dXJuIGVsZW0uY2Fyb3VzZWw7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZXR1cm4gZWxlbS5jYXJvdXNlbCA9IG5ldyBDYXJvdXNlbChlbGVtLCBvcHRpb24pO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZW50cnk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
